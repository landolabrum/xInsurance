"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1569],{1569:(e,t,r)=>{r.d(t,{A:()=>er});var n=r(54604),a=r.n(n),i=r(14232),s=[".d-flex.jsx-2463574095,.home__default.jsx-2463574095{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".home__default.jsx-2463574095{width:var(--s-4-width);padding:var(--s-4);}",".home__default--title.jsx-2463574095{color:var(--gray-30);font-size:var(--s-3);}",".home.jsx-2463574095{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}"];s.__hash="2463574095";var c=r(63857),o=r(42969),l=r(43081),u=r.n(l),d=[".d-flex.jsx-2902923810,.joystick.jsx-2902923810,.surveillance__header.jsx-2902923810,.surveillance.jsx-2902923810{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".surveillance.jsx-2902923810{min-height:500px;width:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-1);-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".surveillance__header.jsx-2902923810{width:100%;}",".joystick.jsx-2902923810{width:var(--s-9-width);padding:var(--s-9);margin:auto;aspect-ratio:1;border-radius:100%;border:solid 1px;background-color:var(--gray-100);position:relative;}",".joystick-thumb.jsx-2902923810{position:absolute;aspect-ratio:1;border-radius:100%;min-width:90px;background-color:var(--primary-70);}"];d.__hash="2902923810";var x=r(25795),h=r(31361),f=[".d-flex.jsx-2353220231,.surveillance-details__body--media.jsx-2353220231,.surveillance-details__body--controls.jsx-2353220231,.surveillance-details__header.jsx-2353220231,.surveillance-details__body.jsx-2353220231,.surveillance-details.jsx-2353220231{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".surveillance-details.jsx-2353220231{height:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-9);width:100%;}",".surveillance-details__header.jsx-2353220231,.surveillance-details__body.jsx-2353220231{width:100%;}",".surveillance-details__header.jsx-2353220231{gap:var(--s-1);}",".surveillance-details__header--title.jsx-2353220231{-webkit-flex:1;-ms-flex:1;flex:1;color:var(--primary-70);font-size:var(--s-1);text-transform:capitalize;}",".surveillance-details__body.jsx-2353220231{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:100%;min-width:500px;min-height:500px;}","@media (max-width:1100px){.surveillance-details__body.jsx-2353220231{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}",".surveillance-details__body--media.jsx-2353220231,.surveillance-details__body--controls.jsx-2353220231{width:var(--s-9-width);-webkit-flex:1;-ms-flex:1;flex:1;padding:var(--s-9);}",".surveillance-details__body--media.jsx-2353220231{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}","@media (min-width:1100px){.surveillance-details__body--media.jsx-2353220231{-webkit-flex:2;-ms-flex:2;flex:2;}}",".surveillance-details__body--controls.jsx-2353220231{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}"];f.__hash="2353220231";var b=r(37493),p=[".d-flex.jsx-209174041,.surveillance-controller--joystick.jsx-209174041,.surveillance-controller--coordinates.jsx-209174041,.surveillance-controller.jsx-209174041{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".surveillance-controller.jsx-209174041{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);}",".surveillance-controller--joystick.jsx-209174041,.surveillance-controller--coordinates.jsx-209174041{width:100%;}",".surveillance-controller--coordinates.jsx-209174041{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".surveillance-controller--joystick.jsx-209174041{background-color:var(--gray-70);padding:var(--s-1) var(--s-9);border-radius:var(--s-1);}"];p.__hash="209174041";var v=[".d-flex.jsx-636723657,.joystick-thumb.jsx-636723657,.joystick.jsx-636723657,.joystick__container.jsx-636723657{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".joystick.jsx-636723657{background:var(--gray-70);background:radial-gradient(circle,var(--gray-30) 30%,var(--black) 100%);border-radius:50%;border:solid 1px var(--gray-100-o);aspect-ratio:1;width:calc(100% - 2px);}",".joystick__container.jsx-636723657{position:relative;aspect-ratio:1;border-radius:50%;width:220px;padding:20px;background:var(--gray-70);background:radial-gradient(circle,var(--black) 25%,var(--gray-80) 100%);}",".joystick-thumb.jsx-636723657{background:radial-gradient(circle,var(--gray-50) 25%,var(--gray-70) 100%);overflow:hidden;z-index:1;border-radius:50%;width:100%;aspect-ratio:1;z-index:4;overflow:visible;box-shadow:inset 1px 1px 10px 10px var(--gray-70),inset -1px -2px 10px 10px var(--gray-90-o);}",'.joystick-thumb.jsx-636723657:after{box-shadow:1px 1px 10px 10px var(--gray-100-o),inset -1px -2px 10px 10px var(--gray-90-o);overflow:visible;border-radius:50%;content:" ";width:calc(100% - 5px);aspect-ratio:1;}'];v.__hash="636723657";var m=r(37876);let _=function(e){var t=e.onMove,r=(0,i.useState)([0,0]),n=r[0],s=r[1],c=(0,i.useRef)(null),o=(0,i.useRef)(null),l=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(e,t,r){var n=performance.now();requestAnimationFrame(function a(i){var c=Math.min((i-n)/r,1);s([e[0]+(t[0]-e[0])*c,e[1]+(t[1]-e[1])*c]),c<1&&requestAnimationFrame(a)})},r=function(e){var r=c.current.getBoundingClientRect(),n=r.left,a=r.top,i=r.width,u=r.height,d=e.clientX-n-i/2,x=e.clientY-a-u/2;if(c.current&&o.current)if(d>i/2||x>u/2||d<-i/2||x<-u/2)return;else s([Math.max(Math.min(d,i/2),-i/2),Math.max(Math.min(x,u/2),-u/2)]),l.current&&clearTimeout(l.current),l.current=setTimeout(function(){t&&t(d,x)},1e3)},a=function t(){e(n,[0,0],500),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)},i=function(){document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)},u=function(r){var n=c.current.getBoundingClientRect(),a=r.touches[0],i=a.clientX-n.left-n.width/2,u=a.clientY-n.top-n.height/2;c.current&&o.current&&(i>n.width/2||u>n.height/2||i<-n.width/2||u<-n.height/2?e([i,u],[0,0],500):(s([Math.max(Math.min(i,n.width/2),-n.width/2),Math.max(Math.min(u,n.height/2),-n.height/2)]),l.current&&clearTimeout(l.current),l.current=setTimeout(function(){t&&t(i,u)},1e3)))},d=function t(){e(n,[0,0],500),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",t)},x=function(){document.addEventListener("touchmove",u),document.addEventListener("touchend",d)};return o.current&&(o.current.addEventListener("mousedown",i),o.current.addEventListener("touchstart",x)),function(){o.current&&(o.current.removeEventListener("mousedown",i),o.current.removeEventListener("touchstart",x))}},[n,t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:v.__hash,children:v}),(0,m.jsx)("div",{className:"jsx-".concat(v.__hash)+" joystick__container",children:(0,m.jsx)("div",{ref:c,className:"jsx-".concat(v.__hash)+" joystick",children:(0,m.jsx)("div",{ref:o,style:{transform:"translate(".concat(n[0],"px, ").concat(n[1],"px)")},className:"jsx-".concat(v.__hash)+" joystick-thumb"})})})]})};var j=r(17812);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let y=function(e){var t,r,n=e.cameraId,s=(0,i.useState)(),o=s[0],l=s[1],d=(0,h.cQ)("IHomeService"),x=(t=(0,c.A)(u().mark(function e(){var t;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o||!n)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.wbInfo(n.toLowerCase());case 4:(t=e.sent)&&l(t);case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),f=(r=(0,c.A)(u().mark(function e(t,r){var a,i,s,c,x;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(a=50,(null==o?void 0:o.ptz_position.horizontal)!=t||(null==o?void 0:o.ptz_position.vertical)!=r){e.next=5;break}return e.abrupt("return");case 5:return s=(i=function(e,t,r){return Math.max(t,Math.min(e,r))})(Number(((t+(null==o?void 0:o.ptz_position.horizontal)||0+a)/2).toFixed(0)),0,350),c=i(Number(((r+(null==o?void 0:o.ptz_position.vertical)||0+a)/2).toFixed(0)),0,180),l(k(k({},o),{},{ptz_position:{vertical:c,horizontal:s}})),e.next=11,d.ptzPosition(n,s,c);case 11:return x=e.sent,e.abrupt("return",x);case 13:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});return(0,i.useEffect)(function(){x()},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:p.__hash,children:p}),(0,m.jsxs)("div",{className:"jsx-".concat(p.__hash)+" surveillance-controller",children:[(0,m.jsx)("div",{className:"jsx-".concat(p.__hash)+" surveillance-controller--coordinates",children:"X: ".concat(null==o?void 0:o.ptz_position.horizontal,", Y: ").concat(null==o?void 0:o.ptz_position.vertical)}),(0,m.jsxs)("div",{className:"jsx-".concat(p.__hash)+" surveillance-controller--joystick",children:[(0,m.jsx)(_,{onMove:f}),(0,m.jsx)("div",{className:"jsx-".concat(p.__hash)})]}),(0,m.jsx)(j.A,{value:null==o?void 0:o.ptz_position.vertical,onChange:function(e){return f(o.ptz_position.horizontal,Number(e.value))},label:"vertical",type:"range"}),(0,m.jsx)(j.A,{value:null==o?void 0:o.ptz_position.horizontal,label:"horizontal",onChange:function(e){return f(Number(e.value),o.ptz_position.vertical)},type:"range"})]})]})};var w=r(89099),O=r(64303),S=r(43668),N=String("https://tiktok.soy".trim());let A=function(e){var t=e.id,r=(0,i.useState)(!0);r[0],r[1],null===S.A||void 0===S.A||S.A.isProduction;var n=(0,w.useRouter)().push;return t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:f.__hash,children:f}),(0,m.jsxs)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details",children:[(0,m.jsxs)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details__header",children:[(0,m.jsx)(O.A,{traits:{width:"100px",beforeIcon:"fa-chevron-left"},variant:"link",onClick:function(){return n("/home/?vid=surveillance",void 0,{shallow:!1})},children:"back"}),(0,m.jsx)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details__header--title",children:t})]}),(0,m.jsxs)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details__body",children:[(0,m.jsx)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details__body--media",children:(0,m.jsx)(b.A,{src:"https://".concat(N,"/api/stream/rtsp?id=").concat(t)})}),(0,m.jsx)("div",{className:"jsx-".concat(f.__hash)+" surveillance-details__body--controls",children:(0,m.jsx)(y,{cameraId:t})})]})]})]}):(0,m.jsx)(m.Fragment,{children:"no src"})};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let E=function(){var e=(0,w.useRouter)(),t=e.query,r=e.push,n=e.pathname,s=null==t?void 0:t.id,o=(0,h.cQ)("IHomeService"),l=(0,i.useState)(null),f=l[0],b=l[1],p=(0,i.useState)(),v=p[0],_=p[1],j=function(e){var a=e.toLowerCase();if(e!==v&&r({pathname:"".concat(n),query:z(z({},t),{},{id:e})}),Object.values(null==f?void 0:f.cameras).find(function(e){return e.name_uri===a})&&!v)return _(a);_(void 0)},g=(0,i.useCallback)((0,c.A)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,o.wbListCameras();case 5:b(e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("[ SURVEILLANCE ]",e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})),[o]);return((0,i.useEffect)(function(){f||g()},[]),(0,i.useEffect)(function(){s?s&&!v&&_(String(s)):_(void 0)},[g]),v)?(0,m.jsx)(A,{id:v}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:d.__hash,children:d}),(0,m.jsx)("div",{className:"jsx-".concat(d.__hash)+" surveillance",children:null!=f&&f.cameras?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"jsx-".concat(d.__hash)+" surveillance__header",children:(0,m.jsx)(x.A,{xs:2,md:3,variant:"card",gap:10,children:["available","enabled","total"].map(function(e){return(0,m.jsxs)("div",{className:"jsx-".concat(d.__hash),children:[e,": ",f[e]]},e)})})}),(0,m.jsx)(x.A,{xs:1,md:3,variant:"card",gap:10,children:Object.values(f.cameras).map(function(e,t){return(0,m.jsx)("div",{onClick:function(){return j(e.name_uri)},className:"jsx-".concat(d.__hash)+" s-w-100",children:JSON.stringify(Object.keys(e))},t)})})]}):"still loading..."})]})};var P=r(39846),M=r(70236),F=r(45794),L=[".d-flex.jsx-2639056870,.lights__light-header-title.jsx-2639056870,.lights__light-header--action.jsx-2639056870,.lights__light.jsx-2639056870{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".lights.jsx-2639056870{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".lights__light.jsx-2639056870{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);border:solid 1px var(--gray-80);border-radius:var(--border-radius);background-color:var(--gray-90);padding:var(--s-9);}",".lights__light-header.jsx-2639056870{width:100%;}",".lights__light-header--action.jsx-2639056870{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;height:var(--s-element);gap:var(--s-9);--ui-icon-color:var(--gray-40);}",".lights__light-header--action.jsx-2639056870:hover{--ui-icon-color:var(--gray-20);}",".lights__light-header-title.jsx-2639056870{min-height:var(--s-element);gap:var(--s-9);}",".in-group.jsx-2639056870{background-color:var(--primary-50) !important;}"];L.__hash="2639056870";var R=r(25179),D=[".d-flex.jsx-2588006735,.bar.jsx-2588006735 .bar__container.jsx-2588006735 .bar__bars-container.jsx-2588006735 .bar__percentage.jsx-2588006735,.bar.jsx-2588006735 .bar__container.jsx-2588006735 .bars__icon.jsx-2588006735,.bar.jsx-2588006735 .bar__container.jsx-2588006735 .bar__header.jsx-2588006735{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".bar.jsx-2588006735{width:100%;}",".bar__primary.jsx-2588006735{background-color:var(--primary-o);}",".bar.jsx-2588006735 .bar__container.jsx-2588006735:hover .bar__bars-container.jsx-2588006735 .bar__percentage.jsx-2588006735{color:var(--white);text-shadow:#f30 1px 0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;visibility:visible;}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bar__header.jsx-2588006735{overflow:hidden;min-height:var(--s-element);white-space:nowrap;position:relative;line-height:1;}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bars__icon.jsx-2588006735{height:var(--s-element);padding-top:20px;--ui-icon-color:var(--gray-60);padding:30px 0 20px;}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bars__status.jsx-2588006735{position:absolute;right:var(--s-9);top:4px;text-transform:capitalize;font-size:var(--s-7);color:var(--yellow-50);--ui-icon-width:var(--s-6);}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bars__status.jsx-2588006735 .bars__status-low.jsx-2588006735{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:5px;}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bar__bars-container.jsx-2588006735{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;gap:var(--border-radius);overflow:hidden;border-radius:var(--border-radius);}",".bar.jsx-2588006735 .bar__container.jsx-2588006735 .bar__bars-container.jsx-2588006735 .bar__percentage.jsx-2588006735{font-size:var(--s-1);visibility:hidden;position:absolute;top:0;bottom:0;width:100%;height:100%;text-align:center;color:var(--gray-20-o);}",".bar__bars-content.jsx-2588006735{box-shadow:inset 0 0 4px 2px var(--gray-100-o);border:solid 1px var(--gray-70);overflow:hidden;border-radius:var(--border-radius);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);height:var(--s-element);background-color:var(--gray-70-o);}",".bar__bars-content.jsx-2588006735 .bar__bars-bar-partial.jsx-2588006735{border-top:solid 1px var(--gray-70);}",".bar__bars-content.jsx-2588006735 .bar__bars-bar-filled.jsx-2588006735,.bar__bars-content.jsx-2588006735 .bar__bars-bar-partial.jsx-2588006735{height:100%;background-color:var(--bar-background,var(--yellow-50));}",".bar__timestamp.jsx-2588006735{width:100%;font-size:var(--s-9);padding-bottom:var(--s-9);line-height:1;color:var(--gray-50);white-space:nowrap;text-align:right;}"];D.__hash="2588006735";var I=r(55108),B=r(24631),T=r(78315),H=r(82851);let q=function(e){var t=e.barCount,r=e.percentage,n=e.icon,s=e.status,c=e.timestamp,o=e.header,l=e.onChange,u=(0,i.useState)(r),d=u[0],x=u[1],h=(0,i.useRef)(null),f=(0,i.useRef)((0,H.debounce)(function(e){l&&l(e)},1e3)).current,b=function(e){if(h.current){var t=h.current.getBoundingClientRect(),r=Math.max(0,Math.min(100-(e.clientY-t.top)/t.height*100,100));x(r),f(r.toFixed(0))}};return(0,i.useEffect)(function(){x(r)},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:D.__hash,children:D}),(0,m.jsxs)("div",{className:"jsx-".concat(D.__hash)+" bar",children:[c&&(0,m.jsx)("div",{className:"jsx-".concat(D.__hash)+" bar__timestamp",children:(0,B.i$)(c,{time:!0})}),(0,m.jsxs)("div",{className:"jsx-".concat(D.__hash)+" bar__container",children:[o&&(0,m.jsxs)("div",{className:"jsx-".concat(D.__hash)+" bar__header",children:[o,n&&(0,m.jsx)("div",{className:"jsx-".concat(D.__hash)+" bars__icon",children:(0,m.jsx)(I.o,{icon:n})}),s&&(0,m.jsx)("div",{className:"jsx-".concat(D.__hash)+" bars__status",children:["STATUS_LOW","low","high"].includes(s)&&(0,m.jsxs)("div",{className:"jsx-".concat(D.__hash)+" bars__status-low",children:[(0,m.jsx)(I.o,{color:"#f90",icon:"fa-exclamation-triangle"}),(0,T.A)(s)]})})]}),(0,m.jsxs)("div",{ref:h,onMouseDown:function(e){return b(e)},onMouseMove:function(e){return 1===e.buttons&&b(e)},className:"jsx-".concat(D.__hash)+" bar__bars-container",children:[function(){for(var e=[],r={filledBar:"bar__bars-bar-filled",emptyBar:"bar__bars-bar-empty",partialBar:"bar__bars-bar-partial"},n=0;n<t;n++){var i=void 0,s={};n<Math.floor(d*t/100)?i=r.filledBar:n===Math.floor(d*t/100)?(s.height="".concat(d*t%100,"%"),i=r.partialBar):(delete s.height,i=r.emptyBar),e.push((0,m.jsxs)("span",{className:"jsx-".concat(D.__hash),children:[(0,m.jsx)(a(),{id:D.__hash,children:D}),(0,m.jsx)("div",{className:"jsx-".concat(D.__hash)+" bar__bars-content",children:(0,m.jsx)("div",{style:s,className:"jsx-".concat(D.__hash)+" "+"bar__bars-bar ".concat(i)})})]},n))}return e}(),(0,m.jsx)("div",{className:"jsx-".concat(D.__hash)+" bar__percentage",children:(0,m.jsxs)("div",{className:"jsx-".concat(D.__hash),children:[d.toString().split(".")[0],"%"]})})]})]})]})]})};var Y=r(36244),Q=[".d-flex.jsx-2325468756,.color-picker.jsx-2325468756{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".color-picker.jsx-2325468756{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;position:relative;height:100%;cursor:pointer;}",".color-picker__info.jsx-2325468756{gap:var(--s-9);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".color-picker.jsx-2325468756 .preview-color.jsx-2325468756{width:var(--s-element);aspect-ratio:1;cursor:pointer;border-radius:var(--border-radius);}",".color-picker.jsx-2325468756 .color-canvas.jsx-2325468756{width:100%;border-radius:var(--border-radius);}"];Q.__hash="2325468756";let U=function(e){var t=e.hex,r=e.onChange,n=(0,i.useState)(),s=n[0],c=n[1],o=(0,i.useRef)(null);(0,i.useEffect)(function(){if(o.current){var e=o.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d",{willReadFrequently:!0});if(t){var r=t.createLinearGradient(0,0,e.width,0);r.addColorStop(0,"red"),r.addColorStop(.15,"yellow"),r.addColorStop(.33,"green"),r.addColorStop(.49,"cyan"),r.addColorStop(.67,"blue"),r.addColorStop(.84,"magenta"),r.addColorStop(1,"red"),t.fillStyle=r,t.fillRect(0,0,e.width,e.height)}}},[]);var l=(0,i.useCallback)((0,H.debounce)(function(e){r&&r(e)},1e3),[r]),u=function(e){var t=e.target,r=(t.name,t.value);c("#".concat(r)),6===r.length&&l(r)};return(0,i.useEffect)(function(){s||c(t||"#fff")},[t,c,u]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:Q.__hash,children:Q}),(0,m.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" color-picker",children:[(0,m.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" color-picker__info",children:[(0,m.jsx)("div",{style:{backgroundColor:s},className:"jsx-".concat(Q.__hash)+" preview-color"}),(0,m.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" color-picker__info",children:["#",(0,m.jsx)(j.A,{value:null==s?void 0:s.replaceAll("#",""),name:"hex",onChange:u,size:"sm"})]})]}),(0,m.jsx)("canvas",{ref:o,onClick:function(e){if(o.current){var r=o.current,n=r.getContext("2d",{willReadFrequently:!0});if(n){var a,i=r.getBoundingClientRect(),s=e.clientX-i.left,u=e.clientY-i.top,d=n.getImageData(s,u,1,1).data,x=(a=d[0],"#"+(0x1000000+(a<<16|d[1]<<8|(0|d[2]))).toString(16).slice(1));t||c(x),l(x)}}},className:"jsx-".concat(Q.__hash)+" color-canvas"})]})]})};var X=function(e,t,r){var n,a,i,s=e/65535*360,c=r/254*(t/254),o=c*(1-Math.abs(s/60%2-1)),l=r/254-c/2;return s>=0&&s<60?(n=c,a=o,i=0):s>=60&&s<120?(n=o,a=c,i=0):s>=120&&s<180?(n=0,a=c,i=o):s>=180&&s<240?(n=0,a=o,i=c):s>=240&&s<300?(n=o,a=0,i=c):(n=c,a=0,i=o),n=Math.round((n+l)*255),a=Math.round((a+l)*255),i=Math.round((i+l)*255),"#".concat(n.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0"))};function J(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return W(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let V=function(){var e,t,r=(0,R.pn)(),n=(0,F.A)(r,2),s=(n[0],n[1]),o=(0,i.useState)([]),l=o[0],d=o[1],f=(0,i.useState)(!1),b=f[0],p=f[1],v=(0,i.useState)(),_=v[0],g=v[1],k=(0,i.useState)(),y=k[0],w=k[1],S=(0,i.useState)(!1),N=S[0],A=S[1],C=(0,h.cQ)("IHomeService"),z=(0,i.useState)("light"),E=z[0],P=z[1],D=function(e,t){w(function(){return y.map(function(r){return r.id_==e.id_&&(t&&(e.view="color"),r=e),r})})},B=function(e){w(y.map(function(t){return(null==t?void 0:t.id_)==e&&((null==t?void 0:t.view)==void 0?t.view="color":(null==t?void 0:t.view)!=void 0&&delete t.view),t}))},T=y&&(null==y?void 0:y.filter(function(e){return e.is_on}))||[],H=function(e){if(0!==T.length){var t=((_?T.findIndex(function(e){return e.id_===_.id_}):-1)+1)%T.length,r=T[t];g(r),W("color",{id:r.id_,hex:e})}};T&&T.map(function(e,t){var r=null!=e&&e.hex?"#".concat(function e(t){return""===t?"":e(t.substr(1))+t.charAt(0)}(e.hex.substring(1,e.hex.length))):"#ff3300";return{time:(t+1)*1e3,value:r,backgroundColor:r,onPoint:H}});var Q=(e=(0,c.A)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s({active:!0,body:"loading ".concat(t)}),e.prev=1,e.next=4,C.hue_list(t);case 4:w(e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("[ FETCH LIGHTS (ERR) ]",JSON.stringify(e.t0));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t){return e.apply(this,arguments)}),W=(t=(0,c.A)(u().mark(function e(t,r){var n,a,i,o,d,x,h,f;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=function(e,t,r){s({active:e,body:"".concat(t,", ").concat(r," ")})})(!0,t,null==r?void 0:r.name),a=function(){var e=(0,c.A)(u().mark(function e(n){var a,i,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=Number(n),e.t0=t,e.next="toggle"===e.t0?4:"brightness"===e.t0?8:"color"===e.t0?13:20;break;case 4:return e.next=6,C.hue_toggle(i,"group"===E&&"group"||void 0);case 6:return a=e.sent,e.abrupt("break",20);case 8:if((null==r?void 0:r.bri)===void 0){e.next=12;break}return e.next=11,C.hue_brightness(i,r.bri,E);case 11:a=e.sent;case 12:return e.abrupt("break",20);case 13:if(!(null!=r&&r.hex)){e.next=19;break}return e.next=16,C.lightColor(n,r.hex,E);case 16:s=X((a=e.sent).hue,a.sat,a.bri),a=$($({},a),{},{hex:s,view:"color"});case 19:return e.abrupt("break",20);case 20:a&&D(a,"color"===t);case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),!N){e.next=23;break}i=J(y),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=13;break}return d=o.value,e.next=11,a(d.id_);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:e.next=46;break;case 23:if(!(l.length>0&&["toggle","brightness","color"].includes(t))){e.next=43;break}x=J(l),e.prev=25,x.s();case 27:if((h=x.n()).done){e.next=33;break}return f=h.value,e.next=31,a(f);case 31:e.next=27;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(25),x.e(e.t1);case 38:return e.prev=38,x.f(),e.finish(38);case 41:e.next=46;break;case 43:if(!(null!=r&&r.id)){e.next=46;break}return e.next=46,a(r.id);case 46:n(!1,t,null==r?void 0:r.name);case 47:case"end":return e.stop()}},e,null,[[5,15,18,21],[25,35,38,41]])})),function(e,r){return t.apply(this,arguments)}),G=function(e){Q(e).then(function(){s({active:!1}),e&&P(e)})},V="light"===E?"group":"light",K=function(e){d(void 0!==l?[].concat((0,M.A)(l),[e]):[e])},Z=function(e){l&&d(l.filter(function(t){return t!==e}))};return(0,i.useEffect)(function(){void 0==y&&G()},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:L.__hash,children:L}),(0,m.jsxs)("div",{className:"jsx-".concat(L.__hash)+" lights",children:[(0,m.jsxs)(x.A,{xs:2,lg:3,gap:15,children:[(0,m.jsx)(O.A,{variant:b&&"primary",onClick:function(){return G(V)},children:V}),(0,m.jsx)(O.A,{variant:b&&"primary",onClick:function(){return p(!b)},children:"start animation"}),(0,m.jsx)(O.A,{variant:b&&"primary",onClick:function(){return A(!N)},children:N?"Unset All":"Set All"})]}),y&&!N&&(0,m.jsx)(x.A,{xs:1,sm:3,gap:15,children:Object.entries(y).map(function(e,t){var r=(0,F.A)(e,2),n=(r[0],r[1]);return(0,m.jsxs)("div",{onDoubleClick:function(){null!=l&&l.includes(n.id_)?Z(n.id_):K(n.id_)},className:"jsx-".concat(L.__hash)+" "+"lights__light ".concat(null!=l&&l.includes(n.id_)?"in-group":""),children:[(0,m.jsxs)("div",{className:"jsx-".concat(L.__hash)+" lights__light-header",children:[(0,m.jsxs)("div",{className:"jsx-".concat(L.__hash)+" lights__light-header--action",children:[(0,m.jsx)(j.A,{size:"sm",value:n.name,disabled:!0}),(0,m.jsx)(O.A,{size:"sm",children:"update"})]}),(0,m.jsxs)("div",{className:"jsx-".concat(L.__hash)+" lights__light-header--action",children:[(0,m.jsx)(Y.A,{name:null==n?void 0:n.id_,value:null==n?void 0:n.is_on,onChange:function(){return W("toggle",{id:n.id_})}}),(0,m.jsx)("div",{onClick:function(){return B(n.id_)},className:"jsx-".concat(L.__hash)+" lights__light-header--action",children:(0,m.jsx)(I.o,{icon:"fa-palette"})})]})]}),(null==n?void 0:n.view)!=="color"?(0,m.jsx)(q,{onChange:function(e){0!=String(e).length&&e&&W("brightness",{id:n.id_,bri:e,name:n.name})},barCount:5,percentage:(null==n?void 0:n.bri)*100/254}):(0,m.jsx)(U,{hex:n.hex,onChange:function(e){return W("color",{id:n.id_,hex:e,name:n.name})}})]},t)})}),N&&(0,m.jsx)(q,{onChange:function(e){0!=String(e).length&&e&&(String(e).startsWith("#")?W("color",{id:"all-lights",hex:e}):W("brightness",{id:"all-lights",bri:e}))},barCount:5,percentage:100})]})]})};var K=r(99920),Z=r(70807),ee=[];ee.__hash="3867722346";let et=function(){var e=(0,h.cQ)("IHomeService"),t=(0,i.useState)(null),r=(t[0],t[1]);return(0,i.useEffect)(function(){var t;(t=(0,c.A)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSpotifyToken();case 3:r(t.sent.access_token),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to fetch Spotify token:",t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(){return t.apply(this,arguments)})()},[e]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:ee.__hash,children:ee}),(0,m.jsx)("div",{className:"jsx-".concat(ee.__hash)+" spotify",children:(0,m.jsx)("div",{className:"jsx-".concat(ee.__hash)+" spotify-controller"})})]})},er=function(e){e.vid;var t=(0,K.Jd)(),r={home:(0,m.jsx)(function(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:s.__hash,children:s}),(0,m.jsx)("div",{className:"jsx-".concat(s.__hash)+" home__default",children:(0,m.jsxs)("div",{className:"jsx-".concat(s.__hash)+" home__default--title",children:[t&&(null==t?void 0:t.name)&&(0,Z.A)(t.name)||"",", Home Automation."]})})]})},{}),surveillance:(0,m.jsx)(E,{}),light:(0,m.jsx)(V,{}),spotify:(0,m.jsx)(et,{})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a(),{id:s.__hash,children:s}),(0,m.jsx)(P.A,{viewName:"home",views:r})]})}}}]);