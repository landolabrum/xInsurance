"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1767],{21767:(t,e,a)=>{a.d(e,{A:()=>P});var n=a(63857),s=a(54604),i=a.n(s),c=a(43081),r=a.n(c),o=a(14232),l=[".d-flex.jsx-3462532996,.transaction--total.jsx-3462532996,.transaction--email.jsx-3462532996,.transaction--date.jsx-3462532996,.transaction--pi.jsx-3462532996,.transaction--list.jsx-3462532996 .transaction__item-description.jsx-3462532996,.transaction--list.jsx-3462532996 .transaction__item.jsx-3462532996,.transaction__content--header-title.jsx-3462532996,.transaction__content.jsx-3462532996,.transaction__error.jsx-3462532996,.transaction__header.jsx-3462532996 .transaction__title.jsx-3462532996,.transaction__header.jsx-3462532996,.transaction.jsx-3462532996{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".transaction.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-4);margin:var(--s-nav-height) auto auto;}","@media (max-width:1260px){.transaction.jsx-3462532996{width:var(--s-4-width);}}",".transaction__header.jsx-3462532996{width:var(--s-4-width);min-height:var(--s-element);}",".transaction__header.jsx-3462532996 .transaction__title.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:var(--s-1);color:var(--primary-50);}",".transaction__error.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-4);padding:var(--s-4);color:var(--orange-50);}",".transaction__content.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:var(--gray-90);border-radius:var(--border-radius);gap:var(--s-4);padding:var(--s-4) var(--s-4) var(--s-1);width:var(--s-4-width);-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".transaction__content--header.jsx-3462532996{width:100%;}",".transaction__content--header-title.jsx-3462532996{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}",".transaction--list.jsx-3462532996{min-height:var(--s-element);background-color:var(--gray-80);border-radius:var(--border-radius);gap:var(--s-12);width:100%;}",".transaction--list.jsx-3462532996 .transaction__item.jsx-3462532996{width:var(--s-4-width);padding:0 var(--s-4);-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-4);height:calc(var(--s-element) * 1.5);}","@media (max-width:900px){.transaction--list.jsx-3462532996 .transaction__item.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:-webkit-max-content;height:-moz-max-content;height:max-content;padding:var(--s-4);margin:auto;}}",".transaction--list.jsx-3462532996 .transaction__item-identity.jsx-3462532996{white-space:nowrap;color:var(--gray-30);}",".transaction--list.jsx-3462532996 .transaction__item-identity.jsx-3462532996 .identity-name.jsx-3462532996{font-size:var(--s-3);}",".transaction--list.jsx-3462532996 .transaction__item-identity.jsx-3462532996 .identity-id.jsx-3462532996{font-size:var(--s-7);color:var(--gray-50);}",".transaction--list.jsx-3462532996 .transaction__item-description.jsx-3462532996{font-size:var(--s-7);font-family:Game;color:var(--gray-40);}",".transaction--list.jsx-3462532996 .transaction__item-amount.jsx-3462532996{font-family:Game;margin-left:auto;color:var(--gray-40);}",".transaction--date.jsx-3462532996{white-space:nowrap;}",".transaction--pi.jsx-3462532996{font-size:var(--s-4);color:var(--primary-10);}","@media (max-width:1100px){.transaction--pi.jsx-3462532996{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-4);padding:var(--s-4) 0;font-size:var(--s-7);}.transaction--pi.jsx-3462532996>div.jsx-3462532996:first-child{font-size:var(--s-2);}}",".transaction--pi.jsx-3462532996,.transaction--email.jsx-3462532996,.transaction--date.jsx-3462532996{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:var(--s-element);}",".transaction--total.jsx-3462532996{text-transform:capitalize;font-size:var(--s-4);font-weight:bold;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;color:var(--gray-10);width:var(--s-4-width);padding:0 var(--s-4) var(--s-4);border-top:solid 1px var(--gray-60);height:var(--s-element);margin:auto;}"];l.__hash="3462532996";var d=a(31361),x=a(89639),h=a(64303),m=a(24631),j=a(99920),u=a(37057),_=a(42969),f=[".d-flex.jsx-1625843204,.pdf-preview__options--actions.jsx-1625843204,.pdf-preview__options.jsx-1625843204,.create-pdf.jsx-1625843204{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".create-pdf.jsx-1625843204{width:100%;}",".pdf-preview.jsx-1625843204{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".pdf-preview--image.jsx-1625843204{width:100%;height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".pdf-preview__options.jsx-1625843204{width:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-4);}",".pdf-preview__options--actions.jsx-1625843204{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;height:auto;min-height:200px;}"];f.__hash="1625843204";var v=a(43028),p=a.n(v),w=a(14312),g=a(5126),b=a(17812),k=a(37876);function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach(function(e){(0,_.A)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}let z=function(t){var e,a=t.pdfRef,s=t.preview,c=t.downloadable,l=t.name,d=(0,g.hS)().openModal,x={width:8.27,height:11.69},m=(0,o.useState)(null),j=(m[0],m[1]),u=function(t){var e=t.imgData,a=(0,o.useState)("in"),n=a[0];a[1];var s=(0,o.useState)(x),c=s[0],r=s[1],l=function(t){var e,a=t.target,n=a.value,s=a.name;/^\d*\.?\d*$/.test(n)&&(e=""===n||"."===n?0:n.endsWith(".")?n:parseFloat(n),r(N(N({},c),{},(0,_.A)({},s,e))))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i(),{id:f.__hash,children:f}),(0,k.jsxs)("div",{className:"jsx-".concat(f.__hash)+" pdf-preview",children:[(0,k.jsx)("img",{src:e,alt:"PDF Preview",className:"jsx-".concat(f.__hash)+" pdf-preview--image"}),(0,k.jsxs)("div",{className:"jsx-".concat(f.__hash)+" pdf-preview__options",children:[(0,k.jsxs)("div",{className:"jsx-".concat(f.__hash)+" pdf-preview__options--actions",children:[(0,k.jsx)("div",{className:"jsx-".concat(f.__hash)}),(0,k.jsx)("div",{className:"jsx-".concat(f.__hash),children:(0,k.jsx)(b.A,{label:"Width ( ".concat(n," ):"),value:c.width,name:"width",type:"tel",onChange:l})}),(0,k.jsx)("div",{className:"jsx-".concat(f.__hash),children:(0,k.jsx)(b.A,{label:"Height ( ".concat(n," ):"),value:c.height,type:"number",name:"height",onChange:l})})]}),(0,k.jsx)(h.A,{onClick:function(){return P(e)},children:"Download Resized PDF"})]})]})]})},v=function(t,e){switch(e){case"in":return 72*t;case"px":return .75*t;default:return t}},y=100,z=100;null!=a&&a.current&&(y=a.current.offsetHeight,z=a.current.offsetWidth);var D=(e=(0,n.A)(r().mark(function t(e){var n,s,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!=a&&a.current)){t.next=7;break}return t.next=3,p()(null==a?void 0:a.current);case 3:n=t.sent.toDataURL("image/png"),s=z>y?"l":"p",e?((i=new w.uE({orientation:s,unit:"px",format:[v(z,"px"),v(y,"px")]})).addImage(n,"PNG",0,0,i.internal.pageSize.getWidth(),i.internal.pageSize.getHeight()),i.save(l?"".concat(l,".pdf"):"download.pdf")):(j(n),d((0,k.jsx)(u,{imgData:n})));case 7:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}),P=function(t){var e=new w.uE({orientation:z>y?"l":"p",unit:"pt",format:[v(z,"px"),v(y,"px")]});e.addImage(t,"PNG",0,0,e.internal.pageSize.getWidth(),e.internal.pageSize.getHeight()),e.save("resized-download.pdf")};return((0,o.useEffect)(function(){},[a]),a)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i(),{id:f.__hash,children:f}),(0,k.jsxs)("div",{className:"jsx-".concat(f.__hash)+" create-pdf",children:[s&&(0,k.jsx)("div",{className:"jsx-".concat(f.__hash)+" "+(f.preview||""),children:(0,k.jsx)(h.A,{onClick:function(){return D(!1)},children:"Preview Content"})}),c&&(0,k.jsx)(h.A,{variant:"primary",onClick:function(){return D(!0)},children:"Download as PDF"})]})]}):(0,k.jsx)(k.Fragment,{children:"No pdf"})};var D="00112233445566778899AABBCCDDEEFF00112233445566778899AABBCCDDEEFF".trim();let P=function(){(0,j.Jd)(),(0,u.C)();var t,e,a,s,c=(0,o.useRef)(),_=(0,d.cQ)("IMemberService"),f=(0,o.useState)(),v=f[0],p=f[1],w=(0,o.useState)(),g=w[0],b=w[1],y=function(){if(!g){var t,e=localStorage.getItem("transaction-token"),a=(t=(0,n.A)(r().mark(function t(e){var a,n,s,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,_.decryptJWT({token:e,secret:String(D),algorithm:"HS256"});case 5:null!=(a=t.sent)&&a.decoded&&(b(a.decoded),null!=(n=a.decoded)&&n.error||x.A.deleteCookie("cart")),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),b({error:i=(null===t.t0||void 0===t.t0||null==(s=t.t0.detail)?void 0:s.detail)||"Unable to decode transaction token."}),console.error("[JWT Decode Error]",i);case 14:case"end":return t.stop()}},t,null,[[2,9]])})),function(e){return t.apply(this,arguments)});e&&a(e)}},N=function(){if(!v&&null!=g&&g.user){var t,e,a,n=g.user,s=null!=(t=null==n||null==(e=n.metadata)?void 0:e.user)?t:{};p({email:(null==n?void 0:n.email)||(null==s?void 0:s.email),name:(null==n?void 0:n.name)||(null==s?void 0:s.name),type:null==s?void 0:s.type,clearance:null==s?void 0:s.clearance,devices:null==s?void 0:s.devices,social:null==s?void 0:s.social,server_url:null==s?void 0:s.server_url,merchant:null==n||null==(a=n.metadata)?void 0:a.merchant})}};(0,o.useEffect)(function(){y()},[]),(0,o.useEffect)(function(){g&&!v&&N()},[g]);var P=null==g?void 0:g.error;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i(),{id:l.__hash,children:l}),(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction",children:[(null==g?void 0:g.total)!==void 0&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction__header",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__title",children:(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__title--status",children:"Purchase Success"})}),(null==c?void 0:c.current)&&(0,k.jsx)(z,{pdfRef:c,downloadable:!0,name:null==(t=g.data)?void 0:t.id})]}),(0,k.jsxs)("div",{ref:c,className:"jsx-".concat(l.__hash)+" transaction__content",children:[(null==g||null==(e=g.data)?void 0:e.id)&&(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__content--header",children:(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__content--header-title",children:(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--pi",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"PURCHASE ID"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:g.data.id})]})})}),(null==g||null==(a=g.data)?void 0:a.created)&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--date",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"Purchased"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:(0,m.i$)(g.data.created,{isTimestamp:!0})})]}),(null==v?void 0:v.email)&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--email",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"Email"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:v.email})]}),(null==v?void 0:v.name)&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--name",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"Name"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:v.name})]}),(null==v?void 0:v.type)&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--type",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"User Type"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:v.type})]}),(null==v?void 0:v.clearance)!==void 0&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--clearance",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"Clearance"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:v.clearance})]}),(null==g||null==(s=g.cart_items)?void 0:s.length)>0&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--list",children:[g.cart_items.map(function(t,e){var a;return(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction__item",children:[(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction__item-identity",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" identity-name",children:t.name}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" identity-id",children:t.id})]}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__item-description",children:t.description}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__item-amount",children:(0,m.bK)(null==t||null==(a=t.price)?void 0:a.unit_amount)})]},e)}),(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" transaction--total",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:"Total"}),(0,k.jsx)("div",{className:"jsx-".concat(l.__hash),children:(0,m.bK)(g.total)})]})]}),P&&(0,k.jsxs)("div",{className:"jsx-".concat(l.__hash)+" card transaction__error declined",children:[(0,k.jsx)("div",{className:"jsx-".concat(l.__hash)+" transaction__title",children:P.includes("card was declined")?"Your card was declined":P}),(0,k.jsx)(h.A,{href:"/cart",children:"Return to Cart"})]}),!g&&(0,k.jsx)("pre",{className:"jsx-".concat(l.__hash)+" debug",children:"No transaction loaded"})]})]})]})}}}]);