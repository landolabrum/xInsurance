"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{30501:(e,t,n)=>{n.d(t,{A:()=>C});var c=n(63857),s=n(45794),a=n(54604),o=n.n(a),r=n(43081),i=n.n(r),l=n(14232),u=['@import url("https://fonts.googleapis.com/css2?family=Ephesis&family=Montserrat:wght@800&family=Play:wght@400;700&family=Poppins&display=swap");',".d-flex.jsx-3101664032,.account-documents__actions.jsx-3101664032,.account-documents .account-documents__list .account-documents--document__terms.jsx-3101664032,.account-documents__pdf-preview.jsx-3101664032,.account-documents__header.jsx-3101664032,.account-documents__status--docs--none.jsx-3101664032,.account-documents__status--docs--doc.jsx-3101664032,.account-documents__status--docs.jsx-3101664032{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".account-documents.jsx-3101664032{width:100%;margin:auto;height:100%;}",".account-documents__status.jsx-3101664032{padding:var(--s-9) var(--s-8);width:calc(100% - var(--s-8) * 2);text-transform:uppercase;font-size:var(--s-5);height:100%;}",".account-documents__status--docs.jsx-3101664032{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-9);font-size:var(--s-8);text-transform:unset;}",".account-documents__status--docs--doc.jsx-3101664032{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;font-size:var(--s-5);color:var(--orange-50);}",".account-documents__status--docs--none.jsx-3101664032{margin:var(--s-9) 0;border-radius:var(--border-radius);width:100%;background-color:var(--gray-70);min-height:100px;}",".account-documents__header.jsx-3101664032{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding:0 0 var(--s-4);}",".account-documents__header--title.jsx-3101664032{font-size:var(--s-3);color:var(--gray-30);font-style:italic;font-weight:900;}",".account-documents__pdf-preview.jsx-3101664032{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-4);min-height:600px;}",".account-documents__pdf-preview--content.jsx-3101664032{min-height:600px;width:100%;overflow:hidden;}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document.jsx-3101664032 .account-documents__pdf.jsx-3101664032{background-color:var(--gray-90);}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document.jsx-3101664032 .account-documents__pdf__description.jsx-3101664032{color:var(--gray-40);padding:var(--s-4);}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document__terms.jsx-3101664032{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-4);margin:var(--s-9) 0;}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document__terms--term.jsx-3101664032{max-width:calc(100% - var(--s-5) * 2);}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document__terms--term__title.jsx-3101664032{font-size:var(--s-5);color:var(--gray-40);}",".account-documents.jsx-3101664032 .account-documents__list.jsx-3101664032 .account-documents--document__terms--term__body.jsx-3101664032{font-size:var(--s-7);line-height:1.5;color:var(--gray-50);}",".account-documents__actions.jsx-3101664032{padding:calc(var(--s-element) * 2) var(--s-4) calc(var(--s-element) * 2);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-element);}"];u.__hash="3101664032";var d=n(31361),m=n(43668),x=n(64303),_=n(70807),h=n(98190),f=n(25179),v=n(78315),j=n(17812),p=[".d-flex.jsx-2189520055,.documents-none--content.jsx-2189520055,.documents-none.jsx-2189520055{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".documents-none.jsx-2189520055{border-radius:var(--border-radius);background-color:var(--gray-80);height:500px;font-size:var(--s-2);font-weight:900;color:var(--secondary-50);text-transform:capitalize;}",".documents-none--content.jsx-2189520055{background-color:var(--gray-90);border-radius:var(--border-radius);width:var(--s-4-width);height:var(--s-4-width);}"];p.__hash="2189520055";var g=n(37876);let b=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(),{id:p.__hash,children:p}),(0,g.jsx)("div",{className:"jsx-".concat(p.__hash)+" documents-none",children:(0,g.jsx)("div",{className:"jsx-".concat(p.__hash)+" documents-none--content",children:"no docs"})})]})};var w=n(43028),k=n.n(w),y=n(14312),N=n(5126),A=n(25795);let C=function(e){var t,n,a,r,p=e.user,w=e.previewPdf,C=(0,l.useRef)(null),D=(0,l.useState)([]),P=D[0],F=D[1],S=(0,d.cQ)("IProductService"),E=(0,f.pn)(),R=(0,s.A)(E,2),z=R[0],O=R[1],L=(0,l.useState)(""),I=L[0],M=L[1],U=(0,l.useRef)(null),H=(0,d.cQ)("IDocumentService"),Q=(0,N.hS)(),q=Q.openModal,G=Q.closeModal;Q.modalContent;var T=(n=(0,c.A)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return G(),O({active:!0,body:"Uploading your document"}),e.prev=2,e.next=5,H.uploadDocument(t,"tax_document_user_upload");case 5:console.log("PDF uploaded successfully",e.sent),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error uploading PDF",e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})),function(e){return n.apply(this,arguments)}),W=(a=(0,c.A)(i().mark(function e(t){var n,c,s,a,r,l,d,m,_,h;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[ PDF CONTAINER REF ]",null==(n=U.current)?void 0:n.offsetHeight),n){e.next=5;break}return console.error("PDF container element not found"),e.abrupt("return");case 5:return c=null==n?void 0:n.offsetWidth,s=null==n?void 0:n.offsetHeight,a=10,r=new y.uE("p","pt",[c,s]),l=a,d=0,e.next=13,k()(n,{scrollY:l});case 13:d=(m=e.sent).height,r.addImage(m,"PNG",a,l,c-2*a,d),_=r.output("blob"),(h=new FormData).append("file",_,"document.pdf"),w?q((0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(),{id:u.__hash,children:u}),(0,g.jsxs)("div",{className:"jsx-".concat(u.__hash)+" account-documents__pdf-preview",children:[(0,g.jsx)("h2",{className:"jsx-".concat(u.__hash),children:"Document Preview"}),(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__pdf-preview--content",children:(0,g.jsx)("embed",{src:URL.createObjectURL(_),type:"application/pdf",width:"100%",height:"600px",className:"jsx-".concat(u.__hash)})}),(0,g.jsx)(x.A,{variant:"primary",onClick:function(){return T(h).then(function(){return O({active:!1})})},children:"Confirm & continue"}),(0,g.jsx)(x.A,{variant:"link",onClick:G,children:"cancel"})]})]})):T(h).then(function(){return O({active:!1})});case 20:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),X=function(e){M(e.target.value)},Y=(r=(0,c.A)(i().mark(function e(){var t,n,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O({active:!0,body:"getting your documents"}),e.prev=1,e.next=4,S.getProducts();case 4:n=e.sent,c=null==p||null==(t=p.metadata)?void 0:t.requirements,F(null==n?void 0:n.data.filter(function(e){var t,n;return(null==e||null==(t=e.metadata)?void 0:t.mid)==m.A.merchant.mid&&(null==e||null==(n=e.metadata)?void 0:n.type)=="document"&&(null==c?void 0:c.includes(e.id))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("[ DOCS ERROR ]",e.t0);case 13:O({active:!1});case 14:case"end":return e.stop()}},e,null,[[1,10]])})),function(){return r.apply(this,arguments)}),B=(t=I.length,p&&(null==p?void 0:p.name)!=void 0?!!(t<3)||!!(t>=3&&String(p.name).toLowerCase().includes(I.toLowerCase()))||"full name incorrect":"no user");(0,l.useEffect)(function(){Object(P).length||Y()},[F]);var J=function(e){var t=e.status,n=e.docs;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(),{id:u.__hash,children:u}),(0,g.jsxs)("div",{className:"jsx-".concat(u.__hash)+" account-documents__status",children:[t," Documents",(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__status--docs",children:(null==n?void 0:n.length)&&Object.entries(n).map(function(e){var t=(0,s.A)(e,2),n=t[0],c=t[1];return(0,g.jsxs)("div",{className:"jsx-".concat(u.__hash)+" account-documents__status--docs--doc",children:[Number(n+1),". ",(0,g.jsx)(x.A,{variant:"link",children:(0,_.g)(null==c?void 0:c.name)})]},n)})||(0,g.jsxs)("div",{className:"jsx-".concat(u.__hash)+" account-documents__status--docs--none",children:["NO documents are ",t]})})]})]})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(),{id:u.__hash,children:u}),(0,g.jsxs)("div",{ref:C,className:"jsx-".concat(u.__hash)+" account-documents",children:[(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__header",children:(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__header--title",children:(null==p?void 0:p.name)&&"".concat((0,_.g)(p.name),"'s Documents")})}),(null==P?void 0:P.length)&&(0,g.jsxs)(A.A,{xs:1,md:2,variant:"card",gapX:10,margin:"var(--s-4) 0",children:[(0,g.jsx)(J,{status:"incomplete",docs:P,className:"jsx-".concat(u.__hash)}),(0,g.jsx)(J,{status:"complete",className:"jsx-".concat(u.__hash)})]})||null,(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__list",children:(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents--document",children:null!=P&&P.length?P.map(function(e,t){return(0,g.jsx)("div",{className:"jsx-".concat(u.__hash),children:(0,g.jsx)(h.A,{variant:"document",label:null==e?void 0:e.name,open:!0,children:(0,g.jsxs)("div",{ref:U,className:"jsx-".concat(u.__hash)+" account-documents__pdf",children:[(null==e?void 0:e.description)&&(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents__pdf__description",children:null==e?void 0:e.description}),(0,g.jsx)("ol",{className:"jsx-".concat(u.__hash)+" account-documents--document__terms",children:(null==e?void 0:e.metadata)&&Object.entries(null==e?void 0:e.metadata).filter(function(e){var t=(0,s.A)(e,2),n=t[0];return t[1],"t-"===n.substring(0,2)}).map(function(e){var t=(0,s.A)(e,2),n=t[0],c=t[1],a=String("".concat((0,_.A)(null==n?void 0:n.split("_")[1])));return(0,g.jsxs)("li",{className:"jsx-".concat(u.__hash)+" account-documents--document__terms--term",children:[(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents--document__terms--term__title",children:(0,_.A)((0,v.A)(a))}),(0,g.jsx)("div",{className:"jsx-".concat(u.__hash)+" account-documents--document__terms--term__body",children:c&&c||""})]},n)})}),(0,g.jsxs)("div",{className:"jsx-".concat(u.__hash)+" account-documents__actions",children:[(0,g.jsx)(j.A,{variant:"signature".concat("string"!=typeof B?"":" invalid"),name:"name",value:I,label:'Sign, "'.concat(null==p?void 0:p.name,'". to agree to the terms & conditions'),placeholder:null==p?void 0:p.name,onChange:X,error:"string"==typeof B&&B||void 0}),(0,g.jsx)(x.A,{variant:String(null==p?void 0:p.name).toLowerCase()==I.toLowerCase()?"primary":"disabled",onClick:function(){return W(e.id)},children:"Agree"})]})]})})},t)}):!z.active&&!(null!=P&&P.length)&&(0,g.jsx)(b,{})})})]})]})}}}]);