"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6230],{36230:(e,t,n)=>{n.d(t,{A:()=>ts});var a=n(42969),r=n(54604),i=n.n(r),s=n(14232),c=[".admin.jsx-2764798464{width:100%;overflow:hidden;}"];c.__hash="2764798464";var o=n(39846),l=n(63857),d=n(70236),u=n(45794),m=n(43081),x=n.n(m),f=[".d-flex.jsx-4024632256,.admin-products__header.jsx-4024632256 .heiarchy__item.jsx-4024632256,.admin-products__header.jsx-4024632256 .heiarchy.jsx-4024632256,.admin-products__header--left.jsx-4024632256,.admin-products__header--right.jsx-4024632256,.admin-products__header.jsx-4024632256,.admin-products.jsx-4024632256{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".admin-products.jsx-4024632256{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);width:var(--s-9-width);-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding:var(--s-9);}","@media (max-with:1100px){.admin-products.jsx-4024632256{width:var(--s-4-width);overflow:hidden;}}",".admin-products__header.jsx-4024632256{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;min-height:var(--s-element);padding:var(--s-4) 0;width:100%;gap:var(--s-9);}",".admin-products__header--left.jsx-4024632256,.admin-products__header--right.jsx-4024632256{gap:var(--s-9);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex:1;-ms-flex:1;flex:1;}",".admin-products__header.jsx-4024632256 .heiarchy.jsx-4024632256{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:var(--s-11);border-radius:var(--s-10);color:var(--green);border:solid 1px;width:var(--s-11-width);background-color:var(--gray-90);font-size:var(--s-7);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-11);}",".admin-products__header.jsx-4024632256 .heiarchy__item.jsx-4024632256{height:var(--s-5);width:100%;border:solid 1px var(--green);border-radius:var(--s-11);}",".admin-products__header.jsx-4024632256 .heiarchy-key.jsx-4024632256,.admin-products__header.jsx-4024632256 .heiarchy-value.jsx-4024632256{-webkit-flex:1;-ms-flex:1;flex:1;padding:var(--s-12) var(--s-11);}",".admin-products__header.jsx-4024632256 .heiarchy-value.jsx-4024632256{background-color:var(--green);color:var(--gray-100);}",".admin-products__header--right.jsx-4024632256{-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}"];f.__hash="4024632256";var h=n(24631),p=n(5126),v=n(89099),j=n(31361),b=n(25179);let _=function(){var e,t=(0,j.cQ)("IAdminService"),n=(0,b.pn)(),a=(0,u.A)(n,2),r=(a[0],a[1]),i=(0,s.useState)(null),c=i[0],o=i[1];return{deletedProduct:c,initiateDelete:(0,s.useCallback)((e=(0,l.A)(x().mark(function e(n){var a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&n.id){e.next=2;break}return e.abrupt("return");case 2:return o(n),r({active:!0,body:"Deleting ".concat(n.name)}),e.prev=4,console.log("[DELETING]",n.id,n.price_id),e.next=8,t.deleteProduct(n.id,n.price_id);case 8:return a=e.sent,e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(4),console.error("Failed to delete product",e.t0),e.t0;case 16:return e.prev=16,r({active:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),function(t){return e.apply(this,arguments)}),[t,r]),setProduct:o}};var y=n(29925),g=n(64303),w=[".d-flex.jsx-1103381192,.remove-icon.jsx-1103381192,.admin-product__footer.jsx-1103381192,.admin-product.jsx-1103381192{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-product.jsx-1103381192{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-9);width:100%;}",".admin-product--title.jsx-1103381192{font-size:var(--s-3);text-transform:capitalize;line-height:1;margin-bottom:var(--s-4);color:var(--gray-40);}",".admin-product__footer.jsx-1103381192{width:100%;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}",".admin-product__section.jsx-1103381192{width:var(--s-9-width);padding:var(--s-9);border-radius:var(--border-radius);background-color:var(--gray-70-o);}",".remove-icon.jsx-1103381192{--ui-icon-color:var(--red-90);background-color:var(--gray-90-o);width:-webkit-max-content;width:-moz-max-content;width:max-content;border-radius:var(--border-radius);color:var(--red-30);padding:0;}",".remove-icon.jsx-1103381192:hover,.remove-icon.jsx-1103381192:active,.remove-icon.jsx-1103381192:focus{--ui-icon-color:var(--red-30);}",".remove-icon.jsx-1103381192:focus-within,.remove-icon.jsx-1103381192:target,.remove-icon.jsx-1103381192:active,.remove-icon.jsx-1103381192:focus{--ui-icon-color:var(--gray-10);background-color:var(--red-30);}"];w.__hash="1103381192";var k=n(55108),O=n(43668),A=n(55204),N=n(37876);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let C=function(e){var t,n=e.product,a=e.products,r=(0,v.useRouter)(),c=O.A.merchant.mid,o=(0,j.cQ)("IAdminService"),m=_().initiateDelete,f=(0,A.hN)(),h=(0,u.A)(f,2),p=(h[0],h[1]),b=[{label:"AI Generated",value:"ai_generated"},{label:"Verified Creator",value:"verified_creator"},{label:"Premium Support",value:"premium_support"},{label:"Early Access",value:"early_access"}],S=[{label:"No Tax (0%)",value:"0.00"},{label:"Standard (7.45%)",value:"0.0745"},{label:"Custom (10%)",value:"0.10"}],C=(0,s.useState)([]),D=C[0],E=C[1],I=(0,s.useState)([]),M=I[0],F=I[1],R=(0,s.useState)([]),z=R[0],T=R[1],L=(0,s.useState)([]),q=L[0],Q=L[1];function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.00",n=arguments.length>2?arguments[2]:void 0,a=[{name:"nickname",label:"Price Name",type:"text",value:(null==n?void 0:n.nickname)||""},{name:"unit_amount",label:"Amount (USD)",type:"text",value:null!=n&&n.unit_amount?String(n.unit_amount/100):"",traits:{mask:"currency"}},{name:"recurring",type:"checkbox",label:"recurring"},{name:"include_tax",label:"Include Tax",type:"select",value:e,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]},{name:"file",label:"Image File",type:"file",multiple:!1,value:""}];return"yes"===e&&a.push({name:"tax_rate",label:"Sales Tax Rate",type:"select",value:t,options:S}),a}(0,s.useEffect)(function(){var e;console.log({categories:null==a?void 0:a.filter(function(e){var t,n;if(null!=e&&null!=(t=e.metadata)&&t.category)return null==e||null==(n=e.metadata)?void 0:n.category})}),E([{name:"name",label:"Product Name",type:"text",required:!0,value:(null==n?void 0:n.name)||"Cuppy Pro"},{name:"description",label:"Description",type:"textarea",value:(null==n?void 0:n.description)||"For those who need Stability in life."},{name:"active",label:"Active",type:"checkbox",value:null==(e=null==n?void 0:n.active)||e},{name:"marketing_features",label:"Marketing Features",type:"multi-select",value:(null==n?void 0:n.marketing_features)||[],options:b}]),null!=n&&n.metadata?F(Object.entries(n.metadata).filter(function(e){return"mid"!==(0,u.A)(e,1)[0]}).map(function(e){var t=(0,u.A)(e,2),n=t[0];return{name:n,label:n,type:"text",value:String(t[1])}})):F([]),null!=n&&n.price&&"object"==typeof n.price?(T([V("inclusive"===n.price.tax_behavior?"yes":"no",n.price.tax_rate||"0.00",P(P({},n.price),{},{recurring:n.price.recurring?{interval:n.price.recurring.interval}:null}))]),Q([n.price.metadata?Object.entries(n.price.metadata).map(function(e){var t=(0,u.A)(e,2),n=t[0];return{name:n,label:n,type:"text",value:String(t[1])}}):[]])):(T([V()]),Q([[]]))},[n]);var U=function(e,t,n){var a=e.target,r=a.name,i=a.value,s=a.files;r=r.replace(/^metadata\./,"");var c=(null==i?void 0:i.value)!==void 0?null==i?void 0:i.value:i;if(s&&s.length>0||c instanceof File){var o=s?Array.from(s):[c];if("number"==typeof t){var l=(0,d.A)(z);return l[t]=l[t].map(function(e){return e.name===r?P(P({},e),{},{value:o[0]}):e}),T(l)}}if("number"==typeof t){var u=(0,d.A)(n?q:z);u[t]=u[t].map(function(e){return e.name===r?P(P({},e),{},{value:c}):e}),n?Q(u):T(u)}else{var m=M.some(function(e){return e.name===r}),x=D.some(function(e){return e.name===r});m?F(function(e){return e.map(function(e){return e.name===r?P(P({},e),{},{value:c}):e})}):x?E(function(e){return e.map(function(e){return e.name===r?P(P({},e),{},{value:c}):e})}):console.warn('Field "'.concat(r,'" not found in form state'))}},B=(t=(0,l.A)(x().mark(function e(){var t,a,i,s,l,d,u,m,f;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=z.map(function(e,t){var n=null==(a=e.find(function(e){return"file"===e.name}))?void 0:a.value;if(n instanceof File){var a,r,i=String((null==(r=e.find(function(e){return"nickname"===e.name}))?void 0:r.value)||"price_".concat(t)),s=n.name.split(".").pop();return new File([n],"".concat(i,"_").concat(t,".").concat(s),{type:n.type})}return null}).filter(Boolean),d=z.map(function(e,t){var n=Object.fromEntries(e.map(function(e){return[e.name,e.value]})),a=n.billing_period;return P(P(P({nickname:String(n.nickname||"price_".concat(t)).trim().replace(/\s+/g,"_"),unit_amount:n.unit_amount?Math.round(100*parseFloat(String(n.unit_amount).replace(/[^\d.]/g,""))):0,currency:"usd",tax_behavior:"yes"===n.include_tax?"inclusive":"exclusive",billing_scheme:"per_unit"},"yes"===n.include_tax&&"string"==typeof n.tax_rate&&{tax_rate:n.tax_rate}),"one_time"!==a&&"custom"!==a&&{recurring:{interval:["day","week","month","year"].includes(String(a))?String(a):"month",interval_count:"quarter"===a?3:"biannual"===a?6:1}}),{},{metadata:Object.fromEntries((q[t]||[]).map(function(e){return[e.name,e.value]}))})}),u={metadata:P({mid:c},Object.fromEntries(M.map(function(e){return[e.name,e.value]}))),name:(null==(t=D.find(function(e){return"name"===e.name}))?void 0:t.value)||"",description:(null==(a=D.find(function(e){return"description"===e.name}))?void 0:a.value)||"",active:(null==(i=D.find(function(e){return"active"===e.name}))?void 0:i.value)||!1,marketing_features:(null==(s=D.find(function(e){return"marketing_features"===e.name}))?void 0:s.value)||[],price:d,merchant_id:c,imageFiles:l},null!=n&&n.id&&(u.id=n.id),e.prev=4,e.next=7,o.createProduct(u);case 7:null!=(m=e.sent)&&m.id&&p({active:!0,list:[{label:"Product Created Successfully!",message:'"'.concat(m.name,'" was created successfully.'),onClick:function(){return r.push("/admin?vid=products&id=".concat(m.id))}}]}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),p({active:!0,apiError:{error:!0,status:(null===e.t0||void 0===e.t0?void 0:e.t0.status)||400,message:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Failed to create product",detail:(null===e.t0||void 0===e.t0||null==(f=e.t0.response)||null==(f=f.data)?void 0:f.detail)||(null===e.t0||void 0===e.t0?void 0:e.t0.detail)||"Unexpected error"},persistence:5e3});case 14:case"end":return e.stop()}},e,null,[[4,11]])})),function(){return t.apply(this,arguments)});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:w.__hash,children:w}),(0,N.jsxs)("div",{className:"jsx-".concat(w.__hash)+" admin-product",children:[(0,N.jsxs)("div",{className:"jsx-".concat(w.__hash)+" admin-product__section",children:[(0,N.jsx)(y.A,{title:null!=n&&n.id?"Edit Product":"Add Product",fields:D,onChange:function(e){return U(e)}}),(0,N.jsx)(y.A,{title:"Product Metadata",fields:M,onChange:function(e){return U(e)},onAddField:function(e){var t=e.target,n=t.name,a=t.value;n=n.replace(/^metadata\./,""),M.find(function(e){return e.name===n})||F(function(e){return[].concat((0,d.A)(e),[{name:n,label:a||n,type:"text",value:""}])})}},"product-meta-".concat(M.length))]}),z.map(function(e,t){var a;return(0,N.jsxs)("div",{className:"jsx-".concat(w.__hash)+" admin-product__section",children:[(0,N.jsx)(y.A,{title:(null==n||null==(a=n.price)?void 0:a.nickname)||"Price ".concat(t+1),onChange:function(e){return U(e,t)},fields:e}),(0,N.jsx)(y.A,{title:"Price ".concat(t+1," Metadata"),fields:q[t]||[],onChange:function(e){return U(e,t,!0)},onAddField:function(e){var n=e.target,a=n.name,r=n.value;a=a.replace(/^metadata\./,""),Q(function(e){var n=(0,d.A)(e);return n[t]||(n[t]=[]),n[t].find(function(e){return e.name===a})||n[t].push({name:a,label:r||a,type:"text",value:""}),n})}},"price-meta-".concat(t)),(0,N.jsx)(k.o,{icon:"fa-trash-can",onClick:function(){T(function(e){return e.filter(function(e,n){return n!==t})}),Q(function(e){return e.filter(function(e,n){return n!==t})})}})]},t)}),(0,N.jsx)(g.A,{variant:"link",traits:{afterIcon:"fa-dollar-sign-circle"},onClick:function(){T(function(e){return[].concat((0,d.A)(e),[V()])}),Q(function(e){return[].concat((0,d.A)(e),[[]])})},children:"Add Price"}),(0,N.jsx)(g.A,{variant:"glow",onClick:B,children:null!=n&&n.id?"Save Changes":"Add Product"}),(null==n?void 0:n.id)&&(0,N.jsx)(g.A,{variant:"danger",traits:{afterIcon:"fa-trash-can"},onClick:function(){return m(n.id)},children:"Delete Product"})]})]})};var D=n(19166),E=n(73908),I=n(99920),M=n(93516);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let T=function(){var e,t=(0,p.hS)(),n=t.openModal;t.closeModal;var r=(0,I.xV)().user,c=(0,s.useState)(),o=c[0],m=c[1],v=(0,s.useState)(""),j=v[0],y=v[1],w=(0,s.useState)(!1),k=w[0],A=w[1],S=(0,s.useState)("list"),P=S[0],R=S[1],T=(0,s.useState)(),L=T[0],q=T[1],Q=(0,b.pn)(),V=(0,u.A)(Q,2),U=(V[0],V[1]),B=(0,s.useState)(),H=(B[0],B[1]),W=(0,s.useState)({visibility:"active",merchant:"all"}),J=W[0],$=W[1],G=(0,s.useRef)(),Y=(0,M.Q)({showAll:!0}),Z=Y.products,K=Y.loading,X=Y.liveMode,ee=Y.hasMore,et=(Y.error,Y.fetchProducts,Y.total),en=(0,s.useState)([]),ea=en[0],er=en[1],ei=(0,s.useMemo)(function(){return k&&ea?ea.filter(function(e){return e.selected}):[]},[k,ea]),es=_(),ec=(es.deletedProduct,es.initiateDelete),eo=(0,s.useCallback)(function(e){clearTimeout(G.current),G.current=setTimeout(function(){return y(e)},300)},[]),el=(0,s.useCallback)(function(){if(Z){var e=(0,d.A)(Z);"active"===J.visibility?e=e.filter(function(e){return e.active}):"inactive"===J.visibility&&(e=e.filter(function(e){return!e.active})),"all"!==J.merchant&&(e=e.filter(function(e){return e.mid===J.merchant})),j&&(e=e.filter(function(e){return Object.values(e).some(function(e){return"string"==typeof e&&e.toLowerCase().includes(j.toLowerCase())})})),er(e)}},[Z,J,j]);(0,s.useEffect)(function(){el()},[J,j,el]),(0,s.useEffect)(function(){Z&&0!==Z.length&&"list"===P&&(er(Z.map(function(e){var t=!1===e.active;if(e.metadata.mid!==O.A.merchant.mid&&"admin-3"!==r.type&&t)return null;var n={id:e.id,image:e.images,name:e.name,type:e.type,price_id:e.price.id,price:(0,h.bK)(e.price.unit_amount),livemode:JSON.stringify(e.livemode),timeline:(0,N.jsxs)("div",{className:"heiarchy",children:[(0,N.jsxs)("div",{className:"heiarchy-item",children:[(0,N.jsx)("div",{children:"created"}),(0,N.jsx)("div",{children:(0,h.i$)(e.created,{isTimestamp:!0})})]}),(0,N.jsxs)("div",{className:"heiarchy-item",children:[(0,N.jsx)("div",{children:"updated"}),(0,N.jsx)("div",{children:(0,h.i$)(e.updated,{isTimestamp:!0})})]})]})};return"admin-3"===r.type&&(n.mid=e.metadata.mid,n.active=e.active),n}).filter(Boolean)),q({total:et,livemode:X,has_more:ee}))},[Z,P]);var ed=function(){er(function(e){return null==e?void 0:e.map(function(e){return z(z({},e),{},{selected:void 0})})}),A(!1)},eu=function(e){"edit"===e?A(function(e){return!e}):R(e)},em=(e=Z||[],(0,d.A)(new Set(e.map(function(e){return e.mid}).filter(Boolean)))).map(function(e){return{label:e,name:"merchant-".concat(e)}}).concat([{label:"all",name:"merchant-all"}]).reverse(),ex={list:{actions:["add","edit"],view:(0,N.jsx)(D.A,{onSelect:k?function(e){e.id&&er(function(t){return null==t?void 0:t.map(function(t){return t.name===e.name&&t.price_id===e.price_id?z(z({},t),{},{selected:!t.selected}):t})})}:void 0,options:{tableTitle:"admin products",hideColumns:["id","selected","price_id"]},data:ea,filters:{visibility:[{label:"everything",name:"visibility-everything"},{label:"active",name:"visibility-active"},{label:"inactive",name:"visibility-inactive"}],merchant:em},setFilter:function(e){var t=e.name.split("-"),n=(0,u.A)(t,2),r=n[0],i=n[1];$(function(e){return z(z({},e),{},(0,a.A)({},r,i))})},search:j,setSearch:eo,onRowClick:function(e){e.id&&(console.log({product:e}),m(null==Z?void 0:Z.find(function(t){return t.id===e.id})),R("product"))}})},add:{actions:["list"],view:(0,N.jsx)(C,{products:Z})},product:{actions:["list"],view:(0,N.jsx)(C,{product:o})}};return K?(0,N.jsx)(E.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:f.__hash,children:f}),(0,N.jsxs)("div",{className:"jsx-".concat(f.__hash)+" admin-products",children:[(0,N.jsxs)("div",{className:"jsx-".concat(f.__hash)+" admin-products__header",children:[(0,N.jsx)("div",{className:"jsx-".concat(f.__hash)+" admin-products__header--left",children:(0,N.jsx)("div",{className:"jsx-".concat(f.__hash)+" heiarchy",children:L&&Object.entries(L).map(function(e){var t=(0,u.A)(e,2),n=t[0],a=t[1];return(0,N.jsxs)("div",{className:"jsx-".concat(f.__hash)+" heiarchy__item",children:[(0,N.jsx)("div",{className:"jsx-".concat(f.__hash)+" heiarchy-key",children:n}),(0,N.jsx)("div",{className:"jsx-".concat(f.__hash)+" heiarchy-value",children:null==a?void 0:a.toString()})]},n)})})}),(0,N.jsxs)("div",{className:"jsx-".concat(f.__hash)+" admin-products__header--right",children:[ex[P].actions.map(function(e){return(0,N.jsx)("div",{className:"jsx-".concat(f.__hash),children:(0,N.jsx)(g.A,{onClick:function(){return eu(e)},children:e})},e)}),ei.length>0&&(0,N.jsx)("div",{className:"jsx-".concat(f.__hash),children:(0,N.jsxs)(g.A,{onClick:function(){var e,t,a=null!=(t=null==ea?void 0:ea.filter(function(e){return e.selected}).map(function(e){return z(z({},e),{},{label:e.name,status:"incomplete"})}))?t:[];H(a),n({confirm:{title:"Delete ".concat(a.length," Products?"),statements:[{label:"Delete",onClick:(e=(0,l.A)(x().mark(function e(){var t,r,i;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U({active:!0,children:"Deleting products..."}),t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}}(e))){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(a),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=18;break}return i=r.value,e.prev=6,e.next=9,ec(i);case 9:e.sent,i.status="complete",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),i.status="error";case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),t.e(e.t1);case 23:return e.prev=23,t.f(),e.finish(23);case 26:U({active:!1}),n({title:"Delete Completed",children:(0,N.jsx)("ol",{children:a.map(function(e){return(0,N.jsxs)("li",{children:[e.name," - ",e.status]},e.id)})}),confirm:{statements:[{label:"back to products",onClick:ed}]}});case 28:case"end":return e.stop()}},e,null,[[2,20,23,26],[6,13]])})),function(){return e.apply(this,arguments)})},{label:"Cancel",onClick:ed}],body:(0,N.jsx)("ol",{children:a.map(function(e){return(0,N.jsxs)("li",{children:[e.name," - ",e.id]},e.id)})})}})},variant:"error",children:[ei.length," ",1===ei.length?"Item":"Items"]})})]})]}),ex[P].view]})]})};var L=[".d-flex.jsx-2701578057,.admin-accounts__account--line.jsx-2701578057,.admin-accounts__account.jsx-2701578057,.admin-accounts.jsx-2701578057{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-accounts.jsx-2701578057{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-9);width:var(--s-9-width);overflow:hidden;}",".admin-accounts__account.jsx-2701578057{width:100%;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".admin-accounts__account--line.jsx-2701578057{border:solid 1px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:var(--s-border-width);gap:2px;line-height:20px;font-size:16px;}",".admin-accounts__account--line-key.jsx-2701578057{color:var(--primary-50);}",".admin-accounts__account--line-value.jsx-2701578057{color:var(--gray-10);word-break:break-word;}"];L.__hash="2701578057";var q=n(94605),Q=[".d-flex.jsx-206585351,.admin-account__info.jsx-206585351,.admin-account__header--title.jsx-206585351,.admin-account__header--contact.jsx-206585351,.admin-account__header.jsx-206585351{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".info-key.jsx-206585351{color:var(--primary-50);position:relative;}",'.info-key.jsx-206585351::after{content:":";}',".info-value.jsx-206585351{color:var(--gray-10);}",".admin-account.jsx-206585351{width:100%;}",".admin-account__header.jsx-206585351{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:auto;padding:var(--s-8) var(--s-4);border:solid 1px var(--gray-70);border-radius:var(--border-radius);background-color:var(--gray-80);gap:var(--s-9);}","@media (max-width:900px){.admin-account__header.jsx-206585351{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}",".admin-account__header--title.jsx-206585351,.admin-account__header--contact.jsx-206585351{gap:4px;}",".admin-account__header--title.jsx-206585351{font-size:var(--s-4);color:var(--gray-50);}",".admin-account__info.jsx-206585351{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;white-space:wrap;}",".admin-account__info--line.jsx-206585351{width:100%;}"];Q.__hash="206585351";let V=function(e){var t,n=e.accountId,a=(0,s.useState)(),r=a[0],c=a[1],o=(0,j.cQ)("IAdminService"),d=(t=(0,l.A)(x().mark(function e(){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=c,e.next=4,o.getAccount(n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),console.log("[ AdminAccount.getAccount()<ERROR> ]",e.t2);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return t.apply(this,arguments)});return(0,s.useEffect)(function(){n&&!r&&d()},[n]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:Q.__hash,children:Q}),(0,N.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" admin-account",children:[(0,N.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__header",children:[(0,N.jsx)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__header--title",children:n}),(0,N.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__header--contact",children:[(null==r?void 0:r.email)&&(0,N.jsx)(g.A,{size:"sm",href:"mailto://".concat(r.email),children:r.email}),(null==r?void 0:r.business_profile.support_phone)&&(0,N.jsx)(g.A,{type:"tel",size:"sm",href:"mailto://".concat(r.email),children:r.business_profile.support_phone})]})]}),(0,N.jsx)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__info"}),(0,N.jsx)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__info",children:(null==r?void 0:r.business_profile)&&Object.entries(r).map(function(e,t){return(0,N.jsx)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__info--line",children:e[0]},t)})}),(0,N.jsx)("hr",{className:"jsx-".concat(Q.__hash)}),(0,N.jsx)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__info",children:(null==r?void 0:r.business_profile)&&Object.entries(r.business_profile).map(function(e,t){return(0,N.jsxs)("div",{className:"jsx-".concat(Q.__hash)+" admin-account__info--line",children:[e[0],": ",JSON.stringify(e[1])]},t)})})]})]})},U=function(){var e,t=(0,j.cQ)("IAdminService"),n=(0,b.pn)(),a=(0,u.A)(n,2),r=(a[0],a[1]),c=(0,s.useState)(),o=c[0],d=c[1],m=(0,s.useState)("list"),f=m[0],p=m[1],v=(e=(0,l.A)(x().mark(function e(){var n,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){d(e.map(function(e,t){var n,a,r,i=null!=(n=e.business_profile)?n:null;return{id:e.id,account:(0,N.jsx)(q.Ay,{cell:"member",data:{id:e.id,name:i.name,email:null!=(a=e.email)?a:"no email",phone:i.support_phone}}),support:(0,N.jsx)(q.Ay,{cell:"member",data:{id:e.id,name:i.name,email:null!=(r=i.support_email)?r:"no email",phone:i.support_phone}}),address:(0,N.jsx)(q.Ay,{cell:"address",data:null==i?void 0:i.support_address}),phone:i.support_phone?(0,N.jsx)(g.A,{variant:"link",size:"sm",href:"tel://".concat(null==i?void 0:i.support_phone),children:(0,h.gB)(i.support_phone)}):(0,N.jsx)(q.qo,{}),url:i.url?(0,N.jsx)(g.A,{size:"sm",variant:"link",target:"_blank",href:"https://".concat(i.url),children:i.url}):(0,N.jsx)(q.qo,{})}}))},e.prev=1,e.next=4,t.listAccounts();case 4:(null==(a=e.sent)?void 0:a.data)&&d(a.data),n(a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("[ ADMIN ACCONTS get Account Err ]",e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])})),function(){return e.apply(this,arguments)});return(0,s.useEffect)(function(){o||("list"===f&&v(),r({active:!0,body:"loading Accounts"})),o&&r({active:!1})},[null==o?void 0:o.length]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:L.__hash,children:L}),(0,N.jsxs)("div",{className:"jsx-".concat(L.__hash)+" admin-accounts",children:[(0,N.jsx)("div",{className:"jsx-".concat(L.__hash)+" admin-accounts__header",children:(0,N.jsx)("h1",{className:"jsx-".concat(L.__hash),children:"Admin Accounts"})}),(0,N.jsxs)("div",{className:"jsx-".concat(L.__hash)+" admin-accounts__account",children:[o&&"list"===f&&(0,N.jsx)(D.A,{data:o,options:{hideColumns:["id"]},onRowClick:function(e){return p(e.id)}}),"list"!==f&&(0,N.jsx)(V,{accountId:f})]})]})]})};var B=[".d-flex.jsx-3334681410{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".nirvana-promo-1.jsx-3334681410{width:100%;aspect-ratio:5/4;background-color:var(--primary-50);}"];B.__hash="3334681410";var H=n(25795),W=n(75804);let J=function(){var e=(0,s.useState)("start"),t=e[0],n=e[1];(0,s.useRef)(null);var a=function(e){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:B.__hash,children:B}),(0,N.jsxs)("div",{className:"jsx-".concat(B.__hash)+" marketing-program-card",children:[(0,N.jsx)(k.o,{icon:"fa-".concat(e.name)}),(0,N.jsxs)("p",{className:"jsx-".concat(B.__hash),children:[e.name," Marketing"]}),(0,N.jsxs)(g.A,{variant:"dark",onClick:function(){return n("method")},children:["$",(null==e?void 0:e.cost)||"41"," / lead"]}),(0,N.jsx)(g.A,{variant:"flat",children:"more info"})]})]})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:B.__hash,children:B}),(0,N.jsxs)("div",{className:"jsx-".concat(B.__hash)+" admin-marketing",children:["start"==t&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"jsx-".concat(B.__hash)+" admin-marketing__header",children:[(0,N.jsx)("h5",{className:"jsx-".concat(B.__hash),children:"Sign up for marketing lists"}),(0,N.jsx)("p",{className:"jsx-".concat(B.__hash),children:"Target your audience using informed media buying across states and the whole country by using Deepturn data analytics and audience groups to identify the people who will be most receptive to your message, create tailored content, and deliver impactful and cost effective campaigns across DMAs."})]}),(0,N.jsxs)(H.A,{gapY:20,xs:1,md:3,gap:10,variant:"card",children:[(0,N.jsx)(a,{name:"google",cost:100,className:"jsx-".concat(B.__hash)}),(0,N.jsx)(a,{name:"tiktok",className:"jsx-".concat(B.__hash)}),(0,N.jsx)(a,{name:"instagram",className:"jsx-".concat(B.__hash)})]})]}),"method"==t&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(W.A,{})})]})]})};var $=[".d-flex.jsx-3678714853,.admin-mgmt__card-body.jsx-3678714853,.admin-mgmt__card-header.jsx-3678714853,.admin-mgmt__card.jsx-3678714853{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-mgmt.jsx-3678714853{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".admin-mgmt__body.jsx-3678714853,.admin-mgmt__header.jsx-3678714853{width:100%;}",".admin-mgmt__header.jsx-3678714853{font-size:var(--s-1);}",".admin-mgmt__body.jsx-3678714853{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-1);}",".admin-mgmt__card.jsx-3678714853{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;overflow:hidden;min-height:150px;color:var(--gray-10);}",".admin-mgmt__card-header.jsx-3678714853{color:var(--primary-50);min-height:var(--s-element);text-transform:capitalize;}",".admin-mgmt__card-body.jsx-3678714853{height:100%;font-size:var(--s-element);-webkit-flex:1;-ms-flex:1;flex:1;width:100%;}"];$.__hash="3678714853";let G=function(){(0,j.cQ)("IAdminService");var e=O.A.merchant;return e.mid,e.stripeId,(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:$.__hash,children:$}),(0,N.jsxs)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt",children:[(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__header"}),(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__body",children:(0,N.jsxs)(H.A,{xs:2,md:4,variant:"card",gap:10,margin:"var(--s-4) 0",children:[(0,N.jsxs)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card",children:[(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-header",children:"new customers"}),(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-body",children:"5"})]}),(0,N.jsxs)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card",children:[(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-header",children:"products sold"}),(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-body",children:"12"})]}),(0,N.jsxs)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card",children:[(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-header",children:"d"}),(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-body",children:"10"})]}),(0,N.jsxs)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card",children:[(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-header",children:"f"}),(0,N.jsx)("div",{className:"jsx-".concat($.__hash)+" admin-mgmt__card-body",children:(0,N.jsx)(q.qo,{})})]})]})})]})]})};var Y=[".d-flex.jsx-3620595596,.admin-customer__header-container.jsx-3620595596 .actions.jsx-3620595596,.admin-customer__header-container.jsx-3620595596 .header.jsx-3620595596,.admin-customer__header-container.jsx-3620595596,.admin-customer.jsx-3620595596{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".admin-customer.jsx-3620595596{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-4);border-radius:var(--border-radius);background-color:var(--gray-90);width:var(--s-4-width);padding:var(--s-4);}","@media (max-width:1100px){.admin-customer.jsx-3620595596{background-color:unset;width:100%;padding:var(--s-1) 0;}}",".admin-customer__header-container.jsx-3620595596{width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}","@media (max-width:1100px){.admin-customer__header-container.jsx-3620595596{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}",".admin-customer__header-container.jsx-3620595596 .header.jsx-3620595596{position:relative;margin-bottom:var(--s-1);}",".admin-customer__header-container.jsx-3620595596 .header--title.jsx-3620595596{color:var(--primary-50);text-transform:capitalize;font-size:var(--s-element);}",".admin-customer__header-container.jsx-3620595596 .header--subtitle.jsx-3620595596{position:absolute;display:table;padding:var(--s-12) var(--s-9);border-radius:var(--s-3);text-transform:uppercase;text-shadow:-2px -1px 4px var(--gray-90);right:0;-webkit-transform:translate(50%,var(--s-11));-ms-transform:translate(50%,var(--s-11));transform:translate(50%,var(--s-11));bottom:0;line-height:1;font-size:var(--s-4);}",".admin-customer__header-container.jsx-3620595596 .actions.jsx-3620595596{gap:var(--s-9);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-left:auto;}"];Y.__hash="3620595596";var Z=[".d-flex.jsx-3448306305,.admin-customer-add__modal-body.jsx-3448306305 .body--key.jsx-3448306305,.admin-customer-add__modal-body.jsx-3448306305 .body--value.jsx-3448306305,.admin-customer-add__modal-body.jsx-3448306305{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-customer-add__title.jsx-3448306305{font-size:var(--s-3);color:var(--gray-40);text-transform:capitalize;padding-bottom:var(--s-4);}",".admin-customer-add__modal-body.jsx-3448306305{width:100%;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:100%;}",".admin-customer-add__modal-body.jsx-3448306305 .body--key.jsx-3448306305,.admin-customer-add__modal-body.jsx-3448306305 .body--value.jsx-3448306305{padding:var(--s-11) var(--s-9);height:inherit;border:solid 1px;border-color:var(--gray-70);}",".admin-customer-add__modal-body.jsx-3448306305 .body--key.jsx-3448306305{border-radius:var(--s-10) 0 0 var(--s-10);background-color:var(--gray-70);}",".admin-customer-add__modal-body.jsx-3448306305 .body--value.jsx-3448306305{--ui-icon-height:100%;--ui-icon-width:var(--s-3);max-height:var(--s-element);border-radius:0 var(--s-10) var(--s-10) 0;}"];Z.__hash="3448306305";var K=n(74540),X=n(70807);let ee=function(){var e,t=(0,v.useRouter)(),n=(0,p.hS)(),a=n.openModal,r=n.closeModal;n.isModalOpen;var c=(0,b.pn)(),o=(0,u.A)(c,2),d=(o[0],o[1]),m=[{name:"first_name",label:"first name",placeholder:"Elon",width:"50%"},{name:"last_name",label:"last name",placeholder:"Tusk",width:"50%"},{name:"phone",label:"phone",placeholder:"1 (800) - call - att",type:"tel",constraints:{min:11,max:11}},{name:"email",label:"email",placeholder:"elontusk@starlink.com",type:"email"},{name:"clearance",label:"clearance",value:1,min:0,max:(0,I.xV)().others.creation,type:"pill",required:!0},{name:"address",label:"address",placeholder:"123 Fake Street"}],f=(0,s.useState)(),h=f[0],_=f[1],w=(0,j.cQ)("IAdminService"),A=(e=(0,l.A)(x().mark(function e(n){var s,c,o,m,f,p,v,j,b,_,y,A,S,P;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j="".concat(null==(s=(0,K.UI)(h,"first_name"))?void 0:s.value," ").concat(null==(c=(0,K.UI)(h,"last_name"))?void 0:c.value),d({active:!0,body:"Creating ".concat(j)}),b=Number(null==(o=(0,K.UI)(h,"clearance"))?void 0:o.value)||void 0,_=(null==(m=(0,K.UI)(h,"phone"))?void 0:m.value)&&String(null==(f=(0,K.UI)(h,"phone"))?void 0:f.value)||void 0,null==(y=null==(p=(0,K.UI)(h,"address"))?void 0:p.value)||delete y.lng,delete y.lat,A={name:j,email:String(null==(v=(0,K.UI)(h,"email"))?void 0:v.value),phone:_,address:y,metadata:{user:{clearance:b,email_verified:!1},merchant:O.A.merchant}},S=function(){var e=(0,l.A)(x().mark(function e(){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.createCustomer(A);case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",t);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),console.log("[ Create Customer ERROR ]",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),P=function(e){var n=void 0;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:Z.__hash,children:Z}),Object.entries(e).map(function(e){var t=(0,u.A)(e,2),a=t[0],r=t[1];if(!["data","id"].includes(a))return(0,N.jsx)("div",{className:"jsx-".concat(Z.__hash),children:(0,N.jsxs)("div",{className:"jsx-".concat(Z.__hash)+" admin-customer-add__modal-body",children:[(0,N.jsx)("div",{className:"jsx-".concat(Z.__hash)+" body--key",children:(0,X.A)(a)}),(0,N.jsx)("div",{className:"jsx-".concat(Z.__hash)+" body--value",children:"boolean"==typeof r?(0,N.jsx)(k.o,{icon:r?"fa-check":"fa-xmark"}):r})]})},a);"id"==a&&(n=r)}),n&&(0,N.jsx)(g.A,{onClick:function(){r(),t.push({query:{cid:n}})},children:"Customer"})]})},S().then(function(e){a({title:"".concat(e.status),children:P(e)}),d({active:!1})});case 11:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return(0,s.useEffect)(function(){h||_(m)},[A]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:Z.__hash,children:Z}),(0,N.jsxs)("div",{className:"jsx-".concat(Z.__hash)+" admin-customer-add",children:[(0,N.jsx)("div",{className:"jsx-".concat(Z.__hash)+" admin-customer-add__title",children:"add customer"}),(0,N.jsx)(y.A,{fields:h,onChange:function(e){var t=e.target,n=t.name,a=t.value;_(h.map(function(e){return e.name==n&&(e.value=a),e}))},onSubmit:A})]})]})};var et=[".admin-customer-list.jsx-3567805678{width:100%;}",".user.jsx-3567805678{--ui-icon-color:var(--primary-50);}"];et.__hash="3567805678";let en=function(e,t){var n,a,r=O.A.merchant.mid,i=null==t||null==(n=t.metadata)||null==(n=n.user)?void 0:n.clearance;if(e&&i){var s=null==e||null==(a=e.metadata)||null==(a=a.merchant)?void 0:a.mid,c=t.email==e.email;return i>=12||i>=10&&s===r||c}};var ea=n(78315);function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let es=function(){var e,t=(0,j.cQ)("IAdminService"),n=(0,s.useState)(!1),a=n[0],r=n[1],c=(0,I.Jd)(),o=(0,s.useState)(),d=o[0],u=o[1],m=(e=(0,l.A)(x().mark(function e(){var n,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===d){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.listCustomers();case 4:(null==(n=a=e.sent)?void 0:n.object)==="list"&&(r(a.has_more),u((a=a.data).map(function(e){if(null!=e&&e.id){var t,n,a,r=en(e,c),s=e.email!==(null==c?void 0:c.email),o=ei(ei(ei({},e.metadata),e.invoice_settings),{},{description:e.description,discount:e.discount,currency:e.currency,invoice_prefix:e.invoice_prefix,next_invoice_sequence:e.next_invoice_sequence});if(r)return{customer:(0,N.jsx)(q.Ay,{cell:"member",data:{id:e.id,name:e.name,email:e.email}}),id:e.id,balance:e.balance,created:(0,N.jsx)(q.Ay,{cell:"date",data:e.created}),default_source:(0,N.jsx)(q.Ay,{cell:"check",data:!!e.default_source}),merchant:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:et.__hash,children:et}),(0,N.jsx)("div",{className:"jsx-".concat(et.__hash)+" "+"d-flex ".concat(s?"":"user"),children:(0,N.jsx)(k.o,{icon:s?"".concat(null==e||null==(t=e.metadata)||null==(t=t.merchant)?void 0:t.name,"-logo"):"fa-star"})})]}),tax_exempt:(0,N.jsx)(q.Ay,{cell:"check",data:"exempt"===e.tax_exempt}),clearance:(0,N.jsx)(q.Ay,{cell:"id",data:(0,ea.A)(null==(n=(0,I._l)(Number(null==e||null==(a=e.metadata)||null==(a=a.user)?void 0:a.clearance)))?void 0:n.user.type,{textTransform:"capitalize"})}),extras:o,quote:e.metadata&&(0,N.jsx)(q.Ay,{cell:"check",data:!!Object.entries(e.metadata).find(function(e){return String(e).includes(String(O.A.merchant.mid))})})}}})));case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return(0,s.useEffect)(function(){m()},[m]),{customers:d,hasMore:a,refresh:function(){u(void 0)}}},ec=function(e){var t,n=e.onSelect,a=es(),r=a.customers,s=a.refresh,c=a.hasMore;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:et.__hash,children:et}),(0,N.jsxs)("div",{className:"jsx-".concat(et.__hash)+" admin-customer-list",children:[(0,N.jsx)("div",{className:"jsx-".concat(et.__hash)+" d-flex s-w-9 justify-end s-4-bottom",children:(0,N.jsx)("div",{className:"jsx-".concat(et.__hash),children:(0,N.jsx)(g.A,{onClick:s,busy:!r,traits:{afterIcon:"fa-rotate"},children:"refresh"})})}),(0,N.jsxs)("div",{className:"jsx-".concat(et.__hash)+" admin-customer-list__table",children:[(0,N.jsx)(D.A,{variant:"mini",options:{hideColumns:["extras","id"]},loading:!(null!=(t=Object(r))&&t.length),data:r,onRowClick:n}),c&&"next"]})]})]})};var eo=[".d-flex.jsx-22858602,.admin-customer-detail__actions.jsx-22858602,.admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602,.admin-customer-detail__display.jsx-22858602 .display--list.jsx-22858602,.admin-customer-detail__display--title.jsx-22858602,.admin-customer-detail__header.jsx-22858602,.admin-customer-detail.jsx-22858602{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-customer-detail.jsx-22858602{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-5);-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;width:100%;}",".admin-customer-detail__header.jsx-22858602{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-left:auto;width:100%;}",".admin-customer-detail__form.jsx-22858602{width:100%;}",".admin-customer-detail__tree.jsx-22858602{min-height:500px;}",".admin-customer-detail__display--title.jsx-22858602{-webkit-flex:1;-ms-flex:1;flex:1;min-height:var(--s-element);text-transform:capitalize;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-9);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;line-height:1;--ui-icon-size:var(--s-1);color:var(--primary-50);--ui-icon-color:var(--primary-50);font-size:var(--s-1);}",".admin-customer-detail__display.jsx-22858602 .display--list.jsx-22858602{--ui-icon-width:var(--s-7);--ui-icon-height:var(--s-6);font-size:var(--s-7);-webkit-flex:1;-ms-flex:1;flex:1;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;gap:var(--s-10);min-height:var(--s-element);-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;border-radius:var(--s-7);overflow:hidden;width:-webkit-max-content;width:-moz-max-content;width:max-content;overflow:hidden;min-height:var(--s-5);border:solid 1px transparent;}","@media (max-width:900px){.admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602{border:unset;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}",".admin-customer-detail__display.jsx-22858602 .display--list-item__key.jsx-22858602,.admin-customer-detail__display.jsx-22858602 .display--list-item__value.jsx-22858602{width:-webkit-max-content;width:-moz-max-content;width:max-content;border:solid 1px transparent;padding:0 var(--s-11);width:var(--s-11-width);}",".admin-customer-detail__display.jsx-22858602 .display--list-item__key.jsx-22858602{text-transform:uppercase;color:var(--gray-70);font-family:Eros;}","@media (max-width:900px){.admin-customer-detail__display.jsx-22858602 .display--list-item__key.jsx-22858602{background-color:unset;color:var(--gray-60);}}",".admin-customer-detail__display.jsx-22858602 .display--list-item__value.jsx-22858602{color:var(--blue-70);height:100%;}","@media (max-width:900px){.admin-customer-detail__display.jsx-22858602 .display--list-item__value.jsx-22858602{background-color:unset;}}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602:hover{cursor:pointer;border:solid 1px var(--blue-70);background-color:var(--gray-30-o);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602:hover .display--list-item__key.jsx-22858602{color:var(--gray-40);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602:hover .display--list-item__value.jsx-22858602{background-color:var(--blue-70);color:var(--gray-10);--ui-icon-color:var(--gray-10);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602 .valid.jsx-22858602{color:var(--green-70);--ui-icon-color:var(--green-70);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602 .valid.jsx-22858602:hover{color:var(--green-70);--ui-icon-color:var(--green-70);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602 .invalid.jsx-22858602{color:var(--red-50);--ui-icon-color:var(--red-50);}",".admin-customer-detail__display.jsx-22858602 .display--list-item.jsx-22858602 .invalid.jsx-22858602:hover .display--list-item__value.jsx-22858602{background-color:var(--blue-70);color:var(--red-50);--ui-icon-color:var(--red-50);}",".admin-customer-detail__actions.jsx-22858602{width:100%;gap:var(--s-9);}","@media (min-width:900px){.admin-customer-detail__actions.jsx-22858602{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}"];function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}eo.__hash="22858602";var eu=function(e){return JSON.parse(JSON.stringify(e))};let em=function(e){var t,n=e.customer_id;e.level,(0,v.useRouter)();var a=(0,j.cQ)("IAdminService"),r=(0,s.useState)(),i=r[0],c=r[1],o=(0,s.useState)(),m=o[0],f=o[1],h=(0,s.useState)({}),b=h[0],_=h[1],y=(0,A.hN)(),g=(0,u.A)(y,2),w=(g[0],g[1]),k=(0,p.hS)().openModal,O=(0,s.useCallback)((0,l.A)(x().mark(function e(){var t;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!n||i||m)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a.getCustomer(n);case 5:if(null!=(t=e.sent)&&t.error){e.next=8;break}return e.abrupt("return",N(t));case 8:return w({active:!0,dismissable:!0,apiError:t}),console.error("Couldn't get customer"),e.abrupt("return");case 13:e.prev=13,e.t0=e.catch(2),c(!1),console.error("[ ADMIN CUSTOMER DETAILS ]",e.t0);case 17:case"end":return e.stop()}},e,null,[[2,13]])})),[n,i,m,a,w]),N=function(e,t,n){var a=eu(e);c(a),f(eu(e)),_(a)},S=function(e,t){var n={};return!function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var i in a)"object"!=typeof a[i]||Array.isArray(a[i])||null===a[i]?a[i]!==t[i]&&P(n,[].concat((0,d.A)(r),[i]).join("."),a[i]):e(t[i]||{},a[i],[].concat((0,d.A)(r),[i]))}(e,t),n},P=function(e,t,n){var a=t.split(".");a.reduce(function(e,t,r){return r===a.length-1?e[t]=n:e[t]||(e[t]={}),e[t]},e)},C=(t=(0,l.A)(x().mark(function e(){var t,n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=(0,l.A)(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.updateCustomer(ed({id:m.id},t));case 3:(n=e.sent)&&k({children:JSON.stringify(n)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error({error:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n=S(m,i),null!=i&&i.email&&(n.email=i.email),0!==Object.keys(n).length){e.next=6;break}return console.log("No changes to update"),e.abrupt("return");case 6:return console.log({differences:n}),e.next=9,t(n);case 9:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,s.useEffect)(function(){void 0===i&&O()},[]),{customer:i,initialCustomer:m,displayFields:b,updateField:function(e){var t=eu(i),n=t,a=e.id.split("-").slice(1);if(a.forEach(function(t,r){r===a.length-1?n[t]=e.value:n=n[t]}),c(t),"select"===e.type){e.options=e.options.map(function(e){return ed(ed({},e),{},{selected:!1})});var r=e.options.find(function(t){return t.value===e.value});r&&(r.selected=!0)}_(t)},modifyCustomer:C,refresh:function(){c(void 0)}}},ex=function(e){var t,n=(0,v.useRouter)(),a=(0,j.cQ)("IAdminService"),r=(0,A.hN)(),i=(0,u.A)(r,2);i[0],i[1];var s=(0,p.hS)(),c=s.openModal,o=s.closeModal,d=s.replaceModal;return{deleteCustomers:(t=(0,l.A)(x().mark(function t(){var r;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=function(){var t=(0,l.A)(x().mark(function t(){var n;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e||0===e.length)){t.next=3;break}return console.error("[ CANNOT DELETE CUSTOMER (NO ID) ]"),t.abrupt("return");case 3:return t.prev=3,t.next=6,a.deleteCustomers(Array.isArray(e)?e:[e]);case 6:if(!(n=t.sent)){t.next=11;break}return t.abrupt("return",n);case 11:console.error("[ ERROR DELETING ( 1 ) ]: ".concat(e));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("[ ERROR DELETING ( 2 ) ]: ",{customer_id:e,error:t.t0});case 17:case"end":return t.stop()}},t,null,[[3,14]])}));return function(){return t.apply(this,arguments)}}(),c({confirm:{title:"Are you sure you want to delete?",statements:[{label:"Yes",onClick:function(){var t=(0,l.A)(x().mark(function t(){var a,i;return x().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:if(!(a=t.sent)){t.next=7;break}return i={title:"Error",children:"Error Deleting: ".concat(e),confirm:{statements:[{label:"return",onClick:o}]}},(null==a?void 0:a.length)>0&&a[0]&&a[0].deleted&&(i={title:"Success",children:"Deleted: ".concat(e),confirm:{statements:[{label:"customers",onClick:function(){return n.push(n.pathname,{query:{vid:"customers"}},{shallow:!1})}}]}}),t.abrupt("return",d(i));case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{label:"Cancel",onClick:o}]}});case 3:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})}};var ef=n(27475),eh=[".d-flex.jsx-3051308367{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".three-tree.jsx-3051308367{width:100%;height:100%;border-radius:var(--border-radius);position:relative;}",".three-tree.jsx-3051308367 svg.jsx-3051308367{display:none;}"];eh.__hash="3051308367";let ep=function(e){var t=e.title,n=e.data,a=(0,s.useState)(),r=a[0],i=a[1];return(0,s.useEffect)(function(){n&&i({name:t,children:function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t||"data",r=Object.entries(n).map(function(t){var n=(0,u.A)(t,2),r=n[0],i=n[1],s={id:a?"".concat(a,"-").concat(r):r,name:r,value:null};return"object"!=typeof i||null===i||Array.isArray(i)?Array.isArray(i)?s.children=i.map(function(t,n){return"object"==typeof t&&null!==t?e(t,"".concat(s.id,"-").concat(n)):{id:"".concat(s.id,"-").concat(n),name:"".concat(r,"-").concat(n),value:t}}):s.value=i:s.children=e(i,s.id).children,s});return{id:a,name:a,children:r}}(n).children})},[n,open,t]),{treeData:r}};function ev(e,t){return"M ".concat(e.y," ").concat(e.x,"\n      C ").concat((e.y+t.y)/2," ").concat(e.x,",\n        ").concat((e.y+t.y)/2," ").concat(t.x,",\n        ").concat(t.y," ").concat(t.x)}function ej(e,t){var n=e.y*Math.cos((e.x-90)/180*Math.PI),a=e.y*Math.sin((e.x-90)/180*Math.PI),r=t.y*Math.cos((t.x-90)/180*Math.PI),i=t.y*Math.sin((t.x-90)/180*Math.PI);return"M ".concat(n,",").concat(a,"\n    C ").concat((n+r)/2,",").concat(a,",\n      ").concat((n+r)/2,",").concat(i,",\n      ").concat(r,",").concat(i)}var eb=function(e){return(null==e?void 0:e.children)||(null==e?void 0:e._children)};let e_=function(e,t,n){var a;(a=(0,l.A)(x().mark(function e(n){return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.append("circle").attr("r",t/2).attr("class","d3-node--circle");case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})(e).then(function(e){return e.append("foreignObject").attr("y","-".concat(t/2)).attr("x",function(e){return eb(e)?-t:t}).attr("id",function(e){var t;return"marker-".concat((null==(t=e.data)?void 0:t.id)||n)}).style("font-size","".concat(t,"px")).style("height","".concat(2*t,"px")).style("overflow","visible").html(function(e){return"<div class='d3-node--".concat(e.data.children?"key":"name","'>\n        ").concat(e.data.name,"\n        <div class='d3-node--value'>").concat(void 0!=e.data.value?"".concat(e.data.value):"","</div>\n        </div>\n        ")})})};var ey=function e(t,n,a,r,i){if(null!=n&&n.parent){var s=t.selectAll("#link-".concat(n.data.id)),c=t.selectAll("#link-".concat(n.parent.data.id));if(!s)throw Error(" NO IDENTIFIER FOR LINK IN (D3 TREE");r&&(s.attr("class",r),c.attr("class",r)),a&&(s.style(Object.keys(a),Object.values(a)),c.style(Object.keys(a),Object.values(a))),e(t,n.parent,a,r)}},eg=n(39286);let ew=function(e){var t=e.data,n=e.selectedData,a=e.onClick,r=e.title,c=void 0===r?"data":r,o=(e.open,e.variant),l=void 0===o?"tidy":o,d=10*c.length,m="radial"===l,x=(0,eg.A)().width,f=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useState)("translate(0,0)"),v=p[0];p[1];var j=ep({title:c,data:t}).treeData,b=function(e,t){var r,i=h.current;if(i){var s=(m?ef.B22().size([2*Math.PI,Math.min(i.offsetWidth,i.offsetHeight)/2]):ef.B22().size([.5*i.offsetHeight,i.offsetWidth]))(e),o=ef.Ltv(f.current).attr("class","d3-svg").attr("width",i.offsetWidth).attr("height",i.offsetHeight).attr("viewBox",m?"-".concat(i.offsetWidth/2," -").concat(i.offsetHeight/2," ").concat(i.offsetWidth," ").concat(i.offsetHeight):"0 0 ".concat(i.offsetWidth," ").concat(i.offsetHeight));o.selectAll("*").remove();var l=o.append("g").attr("class","zoom-group").attr("transform",v),x=l.append("g").attr("class","d3-links"),p=l.append("g").attr("class","d3-nodes").attr("id","d3-nodes"),j=s.descendants(),b=s.links(),_=(null==(r=j[j.length-1])?void 0:r.depth)+1;m?j.forEach(function(e){return e.x=180*e.x/Math.PI}):j.forEach(function(e){e.y=e.depth?e.depth*(i.offsetWidth/_):d});var y=p.selectAll("g.node").data(j,function(e){return e.id||(e.id=++t)}),g=y.enter().append("g").attr("class",function(e){var t,a=eb(e),r=(null==n?void 0:n.id)===e.data.id,i=(null==(t=e.data)?void 0:t.value)===0,s="node d3-node";return i?s+=" d3-node--zero":a?s+=" d3-node__path":r?s+=" d3-node__selected":s+=" d3-node__content",s}).attr("transform",function(t){return m?"rotate(".concat(t.x,") translate(").concat(t.y,",0)"):"translate(".concat(e.y0,",").concat(e.x0,")")}).on("mouseover",function(e,t){ey(x,t,void 0,"d3-link--lighting",t.data.id),ef.Ltv(e.currentTarget).select("circle").classed("d3-link--lighting",!0);var n,a,r,i=(null==(n=t.data)?void 0:n.value)||(null==(a=t.data)?void 0:a.label)||(null==(r=t.data)?void 0:r.name)||"N/A",s=m?[t.y*Math.cos(t.x*Math.PI/180),t.y*Math.sin(t.x*Math.PI/180)]:[t.y+10,t.x-10],c=(0,u.A)(s,2),l=c[0],d=c[1];o.append("text").attr("class","node-tooltip").attr("x",l).attr("y",d).attr("text-anchor","start").attr("font-size","12px").attr("fill","#eee").text(i)}).on("mouseout touchend",function(e){o.selectAll(".node-tooltip").remove(),o.selectAll(".d3-link--lighting").classed("d3-link--lighting",!1),ef.Ltv(e.currentTarget).select("circle").classed("d3-link--lighting",!1)}).on("click",function(e,t){null==a||a(t.data),t.children=t.children?null:t._children;var n,r=m?t.y*Math.cos((t.x-90)*Math.PI/180):t.y,s=m?t.y*Math.sin((t.x-90)*Math.PI/180):t.x,c=i.offsetWidth/2,o=i.offsetHeight/2,l=null==(n=f.current)?void 0:n.querySelector(".zoom-group");l&&ef.Ltv(l).transition().duration(900).ease(ef.TD8).attr("transform","translate(".concat(c-r,",").concat(o-s,")"))});e_(g,10,c);var w=g.merge(y),k=j[j.length-1];k&&(i.style.minHeight="calc(".concat(k.y+1,"px)"),i.style.padding="var(--s-9)"),w.transition().duration(200).attr("transform",function(e){return m?"rotate(".concat(e.x-90,") translate(").concat(e.y,",0)"):"translate(".concat(e.y,",").concat(e.x,")")}),y.exit().transition().duration(200).attr("transform",function(t){return"translate(".concat(e.y,",").concat(e.x,")")}).remove().select("circle").attr("r",1e-6);var O=x.selectAll("path.link").data(b,function(e){return e.target.id}),A=O.enter().append("path").attr("id",function(e){return"link-".concat(e.target.data.id)}).attr("class",function(e){var t,n=(null==(t=e.target)||null==(t=t.data)?void 0:t.value)===0;return"link animated-link".concat(n?" link--zero":"")}).attr("fill","none").attr("stroke","#555").attr("stroke-width",1.2).attr("d",function(t){var n={x:e.x0,y:e.y0};return m?ej(n,n):ev(n,n)});A.merge(O).transition().duration(200).attr("d",function(e){return m?ej(e.source,e.target):ev(e.source,e.target)}),A.each(function(e){var t=this,n=ef.Ltv(t.parentNode);Array.from({length:3}).map(function(){return n.append("circle").attr("r",5).attr("class","link-particle")}).forEach(function(e,n){return function e(n,a){n.interrupt().transition().delay(a).duration(4500).ease(ef.gHU).attrTween("transform",function(){var e=t.getTotalLength();return function(a){n.attr("r",2.5-1.25*a).style("opacity",1-.6*a);var r=t.getPointAtLength(a*e);return"translate(".concat(r.x,",").concat(r.y,")")}}).on("end",function(){return e(n,a)})}(e,500*n)})}),O.exit().transition().duration(200).attr("d",function(t){var n={x:e.x,y:e.y};return m?ej(n,n):ev(n,n)}).remove(),j.forEach(function(e){e.x0=e.x,e.y0=e.y})}};return(0,s.useEffect)(function(){if(j&&f.current&&null!=h&&null!=(e=h.current)&&e.offsetWidth){var e,t=ef.Sk5(j,function(e){return e.children||e._children});t.x0=h.current.offsetHeight/2,t.y0=1,b(t,0)}},[l,j,x,n,v,x]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eh.__hash,children:eh}),(0,N.jsx)("div",{ref:h,className:"jsx-".concat(eh.__hash)+" three-tree",children:(0,N.jsx)("svg",{ref:f,className:"jsx-".concat(eh.__hash)})})]})};function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eA=function(e){var t,n,a,r,c=e.id;e.setView;var o=(0,p.hS)(),l=o.openModal,d=(o.closeModal,o.isModalOpen),u=(0,eg.A)().width,m=(0,v.useRouter)(),x=(null==m||null==(t=m.query)?void 0:t.cid)&&String(null==m||null==(n=m.query)?void 0:n.cid)||c,f=(0,I.QY)().level,h=(0,s.useState)(),j=h[0],b=h[1],_=em({customer_id:x,level:f}),w=_.customer,k=(_.displayFields,_.updateField),O=_.modifyCustomer,A=(_.initialCustomer,_.refresh),S=(null==w?void 0:w.contact)&&(null==(a=(0,K.UI)(w.contact,"name"))?void 0:a.value)||"",P=(0,s.useCallback)(function(e){var t,n=eO(eO({},j),{},{value:null==(t=e.target)?void 0:t.value});k(n),b(n)},[j,k]),C=(0,s.useCallback)(function(e){if(!j){var t,n=eO({},e);if(n.alt=(null==n||null==(t=n.id)||null==(t=t.split("-"))?void 0:t.join(" > "))||n.name,n.label=n.name,e.name.includes("address"))n.type="address";else if(n.children){n.type="select",n.options=Object.values(e.children).map(function(e){return{alt:e.value,label:e.name,value:e.value,selected:!1}});var a=n.options.find(function(e){return e.value===n.value});a&&(a.selected=!0)}b(n)}},[]),D=function(){null!=j&&j.children||l({children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("small",{className:"d-flex justify-start s-w-100",children:null==j?void 0:j.alt}),(0,N.jsx)(y.A,{fields:[j],onChange:P})]})})},M=ex(x).deleteCustomers;return(0,s.useEffect)(function(){u<1100&&j&&!d&&D()},[u]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eo.__hash,children:eo}),(0,N.jsxs)("div",{className:"jsx-".concat(eo.__hash)+" admin-customer-detail",children:[(0,N.jsxs)("div",{className:"jsx-".concat(eo.__hash)+" admin-customer-detail__header",children:[(null==w||null==(r=w.metadata)?void 0:r.forms)&&(0,N.jsx)(g.A,{busy:void 0==w,onClick:A,children:"new form!"}),(0,N.jsx)(g.A,{busy:void 0==w,onClick:A,children:"refresh"})]}),j&&u>1100?(0,N.jsx)(y.A,{fields:[j],onChange:P}):"",w&&(0,N.jsx)("div",{className:"jsx-".concat(eo.__hash)+" admin-customer-detail__tree",children:(0,N.jsx)(ew,{onClick:function(e){return C(e)},data:w,selectedData:j,title:"customer"})}),void 0==w&&(0,N.jsx)(E.A,{}),!1==w&&(0,N.jsxs)("h1",{className:"jsx-".concat(eo.__hash),children:["No Customer: $",m.query.cid]})]}),(0,N.jsx)("div",{className:"jsx-".concat(eo.__hash)+" admin-customer-detail__actions",children:(0,N.jsxs)(g.A,{onClick:function(){O()},children:["Update ",S]})}),(0,N.jsx)("div",{style:{marginLeft:"auto"},className:"jsx-".concat(eo.__hash),children:(0,N.jsxs)(g.A,{variant:"error",onClick:function(){return M()},children:["Delete ",S]})})]})};var eN=n(12720);function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eC=function(){var e,t=(0,v.useRouter)(),n=null==t?void 0:t.query,a=function(e,a){t.push({query:eP(eP({},n),{},{cid:(null==a?void 0:a.id)||e})},void 0,{shallow:!0})},r={modify:(0,N.jsx)(eA,{id:n.cid,setView:function(e){a(e)}}),list:(0,N.jsx)(ec,{onSelect:function(e){return a("modify",e)}}),add:(0,N.jsx)(ee,{})};return((0,s.useEffect)(function(){},[n]),null!=n&&n.vid&&(null==n?void 0:n.vid)==="customers")?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:Y.__hash,children:Y}),(0,N.jsxs)("div",{className:"jsx-".concat(Y.__hash)+" admin-customer",children:[(0,N.jsx)("div",{className:"jsx-".concat(Y.__hash)+" admin-customer__header-container",children:(0,N.jsxs)("div",{className:"jsx-".concat(Y.__hash)+" actions",children:["add"!==n.cid&&(0,N.jsx)(g.A,{traits:{afterIcon:"fa-user-plus"},variant:"dark",onClick:function(){return a("add")},children:"Add"}),"list"!==n.cid&&(0,N.jsx)(g.A,{variant:"dark",traits:{afterIcon:"fa-user-group"},onClick:function(){return a("list")},children:"Customers"})]})}),(0,N.jsx)(eN.A,{currentView:n.cid&&(null==(e=n.cid)?void 0:e.includes("cus_"))?"modify":null!=n&&n.cid?String(n.cid):"list",views:r})]})]}):(0,N.jsx)(N.Fragment,{})};var eD=[".admin-data.jsx-484758115{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:1rem;width:100%;}"];eD.__hash="484758115";var eE=[".d-flex.jsx-646343204,.admin-data-header__actions.jsx-646343204,.admin-data-header.jsx-646343204{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-data-header.jsx-646343204{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;gap:var(--s-1);background-color:var(--gray-80);width:var(--s-9-width);padding:var(--s-9);border-radius:var(--border-radius);}",".admin-data-header__actions.jsx-646343204{width:var(--s-9-width);padding:var(--s-9);gap:var(--s-2);background-color:var(--gray-90);}"];eE.__hash="646343204";var eI=n(9531);let eM=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eE.__hash,children:eE}),(0,N.jsxs)("div",{className:"jsx-".concat(eE.__hash)+" admin-data-header",children:[(0,N.jsx)("h1",{className:"jsx-".concat(eE.__hash),children:"Data Management"}),(0,N.jsx)("p",{className:"jsx-".concat(eE.__hash),children:"Manage your data efficiently."}),(0,N.jsx)("div",{className:"jsx-".concat(eE.__hash)+" admin-data-header__actions",children:(0,N.jsx)(eI.A,{size:{xs:1,sm:2,md:3},btns:[{label:"Add",onClick:function(){return console.log("Add clicked")}},{label:"Edit",onClick:function(){return console.log("Edit clicked")}},{label:"Delete",onClick:function(){return console.log("Delete clicked")}}]})}),(0,N.jsx)("div",{className:"jsx-".concat(eE.__hash)+" admin-data-header__actions",children:(0,N.jsx)(eI.A,{size:{xs:1,sm:2,md:3},btns:[{label:"Export",onClick:function(){return console.log("Export clicked")}},{label:"Import",onClick:function(){return console.log("Import clicked")}}]})})]})]})};var eF=n(30501);let eR=function(){(0,j.cQ)("IMemberService"),(0,j.cQ)("IAdminService");var e=s.useState(!1),t=(0,u.A)(e,2),n=t[0];t[1];var a=(0,I.Jd)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eD.__hash,children:eD}),(0,N.jsxs)("div",{className:"jsx-".concat(eD.__hash)+" admin-data",children:[(0,N.jsx)("h1",{className:"jsx-".concat(eD.__hash),children:"Data Management"}),(0,N.jsx)("p",{className:"jsx-".concat(eD.__hash),children:"Manage your data efficiently."}),a&&n&&(0,N.jsx)(eF.A,{}),(0,N.jsx)(eM,{}),(0,N.jsx)(D.A,{data:[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"}],loading:!1})]})]})};var ez=n(37493),eT=[".d-flex.jsx-2587155492,.remote-access-viewer.jsx-2587155492{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100vh;}",".remote-access-viewer.jsx-2587155492{z-index:1;width:100%;height:100%;min-height:1024px;padding-bottom:var(--s-element);position:relative;}",".remote-access-viewer__iframe.jsx-2587155492{width:100%;height:100%;border:none;min-height:50vh;max-width:100%;max-height:100%;object-fit:contain;position:absolute;top:0;left:0;}"];function eL(){var e=(0,s.useState)(null),t=e[0],n=e[1],a=(0,s.useState)(!1),r=a[0];return a[1],(0,s.useEffect)(function(){n("https://remote.tiktok.soy/vnc.html")},[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eT.__hash,children:eT}),(0,N.jsx)("div",{className:"jsx-".concat(eT.__hash)+" remote-access-viewer ",children:t?(0,N.jsx)(ez.A,{controls:!1,src:"https://remote.tiktok.soy/vnc.html",type:"iframe",variant:"background",onLoad:console.log}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("h1",{className:"jsx-".concat(eT.__hash)+" text-2xl font-bold",children:"Remote Computer Viewer"}),(0,N.jsx)("div",{className:"jsx-".concat(eT.__hash)+" text-white flex items-center justify-center h-full text-lg",children:r?"Failed to connect to remote desktop.":"Connecting to remote session..."})]})})]})}eT.__hash="2587155492";var eq=[".d-flex.jsx-1318459489,.remote-access-page.jsx-1318459489{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".remote-access-page.jsx-1318459489{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-1);width:100%;position:relative;}"];eq.__hash="1318459489";var eQ=[".remote-video-board.jsx-370771850{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;height:100vh;}",".video-item.jsx-370771850{width:100%;height:auto;overflow:hidden;}"];eQ.__hash="370771850";let eV=function(){var e=function(e){var t=e.src,n=(e.id,e.alt),a=(e.poster,e.autoplay),r=e.controls;return(0,N.jsx)("div",{className:"remote-video",children:(0,N.jsx)(ez.A,{src:t,alt:n,type:"iframe",autoplay:a,controls:r,loadingText:"Loading...",preload:"none"})})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eQ.__hash,children:eQ}),(0,N.jsx)("div",{className:"jsx-".concat(eQ.__hash)+" remote-video-board",children:(0,N.jsx)(H.A,{xs:1,md:3,gap:10,children:[{src:"https://www.youtube.com/embed/Oy0nVlkVvMg?si=tuLP7cf8LgZpbCIr",id:"video1",alt:"Video 1",autoplay:!1,controls:!0},{src:"https://www.youtube.com//qdBD7JPoDDM?si=9pZcoQ2NZCV01akF",id:"video1",alt:"Video 1",autoplay:!1,controls:!0}].map(function(t,n){return(0,N.jsx)("div",{className:"jsx-".concat(eQ.__hash)+" video-item",children:(0,N.jsx)(e,{src:t.src,id:t.id,alt:t.alt,autoplay:t.autoplay,controls:t.controls})},n)})})})]})},eU=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eq.__hash,children:eq}),(0,N.jsx)("div",{className:"jsx-".concat(eq.__hash)+" remote-access-page",children:(0,N.jsx)(eN.A,{views:{remoteAccess:(0,N.jsx)(eL,{}),loading:(0,N.jsx)("div",{className:"jsx-".concat(eq.__hash)+" loading",children:"Loading..."}),board:(0,N.jsx)(eV,{}),error:(0,N.jsx)("div",{className:"jsx-".concat(eq.__hash)+" error",children:"Error loading remote access"})},currentView:"remoteAccess"})})]})};var eB=[".d-flex.jsx-3551636617,.admin-stream__card-body.jsx-3551636617,.admin-stream__card-header.jsx-3551636617,.admin-stream__card.jsx-3551636617,.admin-stream__table.jsx-3551636617{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-stream.jsx-3551636617{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}",".admin-stream__body.jsx-3551636617,.admin-stream__header.jsx-3551636617{width:100%;}",".admin-stream__header.jsx-3551636617{font-size:var(--s-1);}",".admin-stream__body.jsx-3551636617{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;gap:var(--s-element);width:100%;}",".admin-stream__table.jsx-3551636617{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);width:100%;}",".admin-stream__card.jsx-3551636617{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:100%;overflow:hidden;min-height:150px;color:var(--gray-10);}",".admin-stream__card-header.jsx-3551636617{color:var(--primary-50);min-height:var(--s-element);text-transform:capitalize;}","@media (max-width:1100px){.admin-stream__card-header.jsx-3551636617{padding:var(--s-9);font-size:var(--s-6);}}",".admin-stream__card-body.jsx-3551636617{height:100%;font-size:var(--s-element);-webkit-flex:1;-ms-flex:1;flex:1;width:100%;}","@media (max-width:1100px){.admin-stream__card-body.jsx-3551636617{font-size:var(--s-6);}}"];eB.__hash="3551636617";var eH=[];eH.__hash="2085888330";var eW=n(98190),eJ=[".d-flex.jsx-1374700139,.admin-stream-event.jsx-1374700139{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-stream-event.jsx-1374700139{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);padding:var(--s-9);width:var(--s-9-width);}"];function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function eG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}eJ.__hash="1374700139";var eY={eventName:"",locationName:"",locationLatitude:0,locationLongitude:0,lapCount:1};let eZ=function(e){var t=e.event,n=e.setEvent,r=(0,p.hS)(),c=r.openModal;r.closeModal;var o=(0,s.useState)(t||eY),l=o[0],d=o[1];return(0,s.useEffect)(function(){d(t)},[t]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eJ.__hash,children:eJ}),(0,N.jsx)("div",{className:"jsx-".concat(eJ.__hash)+" admin-stream-event",children:(0,N.jsx)(y.A,{fields:Object.keys(l).map(function(e){return{name:e,label:e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()}),value:l[e],type:"number"==typeof l[e]?"number":"text",required:!0,placeholder:"Enter ".concat(e)}}),onChange:function(e){var t=e.target,n=t.name,r=t.value;d(function(e){return eG(eG({},e),{},(0,a.A)({},n,["lapCount","locationLatitude","locationLongitude"].includes(n)?Number(r):r))})},onSubmit:function(){n(l),c({children:"Event data updated!"})},submitText:"Save Event"})})]})};var eK=[".d-flex.jsx-1374700139,.admin-stream-event.jsx-1374700139{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".admin-stream-event.jsx-1374700139{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--s-9);padding:var(--s-9);width:var(--s-9-width);}"];eK.__hash="1374700139";var eX=n(17812),e0=n(14588),e1=n(63387);function e2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function e5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e2(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e3=[{name:"boatId",label:"Boat ID",type:"number",required:!0,value:0,placeholder:"Enter Boat ID"},{name:"placement",label:"place",type:"number",required:!0,value:1,placeholder:"Enter Boat ID"},{name:"teamName",label:"Team Name",type:"text",required:!0,value:"Team A",placeholder:"Enter Team Name"},{name:"throttleman",label:"Throttleman",type:"text",required:!0,value:"",placeholder:"Enter Throttleman"},{name:"driver",label:"Driver",type:"text",required:!0,value:"",placeholder:"Enter Driver"},{name:"class",label:"Class",type:"select",options:[{value:"Pro Class 1",label:"Pro Class 1"},{value:"Super Cat",label:"Super Cat"},{value:"Factory Stock",label:"Factory Stock"},{value:"Super Stock",label:"Super Stock"},{value:"Super V",label:"Super V"},{value:"Mod V",label:"Mod V"},{value:"Bracket Class 200",label:"Bracket Class 200"},{value:"",label:""},{value:"",label:""}],required:!0,value:"",placeholder:"Enter Class"}],e6={event:{eventName:"",locationName:"",locationLatitude:0,locationLongitude:0,lapCount:1},competitors:[e3.reduce(function(e,t){return e[t.name]="string"==typeof t.value||"number"==typeof t.value?t.value:"boolean"==typeof t.value?String(t.value):"",e},{})]};let e8=function(e){var t=e.raceData,n=e.setRaceData,r=(0,p.hS)();r.openModal,r.closeModal;var c=(0,s.useState)(e3),o=c[0],l=c[1],u=(0,s.useState)(!0),m=u[0],x=u[1],f=(null==t?void 0:t.competitors)||[],h=function(e,t,r){var i=(0,d.A)(f);if("placement"===t&&"number"==typeof r){var s=Math.max(1,r),c=i.findIndex(function(t,n){return t.placement===s&&n!==e});if(-1!==c){var o=i[c].placement;i[c].placement=i[e].placement,i[e].placement=o}else i[e].placement=s;n(i);return}i[e]=e5(e5({},i[e]),{},(0,a.A)({},t,r)),n(i)},v=function(){return f.reduce(function(e,t){var n;return e[null==t?void 0:t.name]=null!=(n=t.value)?n:"",e},{})};return((0,s.useEffect)(function(){v()},[o]),t)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eK.__hash,children:eK}),(0,N.jsxs)("div",{className:"jsx-".concat(eK.__hash)+" admin-stream-event",children:[m&&(0,N.jsx)(y.A,{fields:o,onChange:function(e){var t=e.target,n=t.name,a=t.value;l(function(e){return e.map(function(e){if(e.name!==n)return e;var t,r,i="number"===e.type?Number(a):a,s=null,c=e.label;if(["driver","throttleman"].includes(n))s=(0,e1.A)("name",i),c=e5(e5({},"string"==typeof c?{text:c}:c),{},{text:s?"* ".concat(s):(null==(o=c)?void 0:o.text)||n,color:s?"var(--orange-50)":void 0});else if("boatId"===e.name){var o,l,d=f.some(function(e){return Number(e.boatId)===Number(i)});0>Number(i)?s="Boat ID must be a positive number":d&&(s="Boat ID must be unique"),c=e5(e5({},"string"==typeof c?{text:c}:c),{},{text:s?"* ".concat(s):(null==(l=e.label)?void 0:l.text)||n,color:s?"var(--orange-50)":void 0})}else"teamName"===e.name&&String(i).length<3?(s="Team Name must be at least 3 characters",c=e5(e5({},"string"==typeof c?{text:c}:c),{},{text:s?"* ".concat(s):(null==(t=c)?void 0:t.text)||n,color:s?"var(--orange-50)":void 0})):null!=e&&e.options&&e.options.forEach(function(t){var n;t.value===(null==(n=Object(a))?void 0:n.value)&&(i=t.value,console.log(e5(e5({},e),{},{value:i,error:s||void 0,label:c})))});return e.required&&!i&&(s=(0,e1.A)("required",i),c=e5(e5({},"string"==typeof c?{text:c}:c),{},{text:s?"* ".concat(s):(null==(r=c)?void 0:r.text)||n,color:s?"var(--orange-50)":void 0})),e5(e5({},e),{},{value:i,error:s||void 0,label:c})})})},onSubmit:function(){var e=v();n(function(t){return[].concat((0,d.A)(t),[e5(e5({},e),{},{placement:0})])}),l(e3),x(!1)}}),(0,N.jsx)("div",{className:"jsx-".concat(eK.__hash)+" admin-stream__table",children:(0,N.jsx)(D.A,{data:null==t?void 0:t.competitors,options:{hoverable:!0,tableTitle:(0,N.jsxs)("div",{className:"jsx-".concat(eK.__hash)+" d-flex gap-5 justify-between s-w-100",children:[(0,N.jsx)("div",{className:"jsx-".concat(eK.__hash),children:"Race Data"}),(0,N.jsx)("div",{className:"jsx-".concat(eK.__hash)+" actions",children:(0,N.jsx)(g.A,{onClick:function(){l(e3),x(!0)},traits:{afterIcon:"fa-user-plus"},children:"Add Competitor"})})]}),renderCell:function(e,t,a){return"placement"===e?(0,N.jsx)(e0.A,{amount:t.placement,setAmount:function(t){return h(a,e,Math.max(1,t))},variant:"flat"}):"remove"===e?(0,N.jsx)("div",{onClick:function(){var e=(0,d.A)(f);e.splice(a,1),n(e)},style:{cursor:"pointer"},className:"jsx-".concat(eK.__hash),children:(0,N.jsx)(k.o,{icon:"fa-trash"})}):(0,N.jsx)(eX.A,{value:String(t[e]),onChange:function(t){return h(a,e,t.target.value)},variant:"flat"})},hide:"footer"}})})]})]}):"loading"};var e4=n(18820);function e7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function e9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let te=function(e){var t={raceData:null==e?void 0:e.raceData,setRaceData:null==e?void 0:e.setRaceData,setFirst:e.setFirst},n=(0,s.useState)("Event Info"),a=n[0],r=n[1],c=function(e){var t=e.icon,n=e.text,s=e.component;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eH.__hash,children:eH}),(0,N.jsx)("div",{className:"jsx-".concat(eH.__hash)+" admin-stream-tools__section",children:(0,N.jsx)(eW.A,{open:a==n,label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k.o,{icon:t})," ",n]}),onToggle:function(e){r(a==n?"":n)},children:s})})]})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eH.__hash,children:eH}),(0,N.jsx)("div",{className:"jsx-".concat(eH.__hash)+" admin-stream-tools d-flex-col s-9 g-9",children:(0,N.jsxs)(H.A,{xs:1,md:2,children:[(0,N.jsxs)("div",{className:"jsx-".concat(eH.__hash)+" d-flex-col  s-9 g-9",children:[(0,N.jsx)("div",{className:"jsx-".concat(eH.__hash),children:(0,N.jsx)(c,{icon:"fa-checker-flag",text:"Event Info",component:(0,N.jsx)(eZ,{event:e6.event,setEvent:function(t){return e.setRaceData(function(e){return e9(e9({},e),{},{event:t})})}}),className:"jsx-".concat(eH.__hash)})}),(0,N.jsx)("div",{className:"jsx-".concat(eH.__hash),children:(0,N.jsx)(c,{icon:"fa-circle-user",text:"Competitors",component:(0,N.jsx)(e8,e9({},t)),className:"jsx-".concat(eH.__hash)})})]}),(0,N.jsx)("div",{style:{position:"relative"},className:"jsx-".concat(eH.__hash),children:(0,N.jsx)(e4.A,{variant:"embedded"})})]})})]})};function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ta=function(){var e,t,n=(0,s.useState)(!1),a=(n[0],n[1]),r=function(e){var t={};return(Array.isArray(e)?e:Object.entries(e).map(function(e){var t=(0,u.A)(e,2);return{name:t[0],value:t[1]}})).forEach(function(e){t[e.name]=e.value}),"number"!=typeof t.placement&&(t.placement=Number(t.placement)||0),t},c=tn(tn({},e6),{},{competitors:Array.isArray(e6.competitors)?e6.competitors.map(function(e){return r(e)}):[]});console.log("initialRaceData:",c);var o=(0,s.useState)(c),l=o[0],d=o[1];return console.log("placements:",(t={},null==e6||null==(e=e6.competitors)?void 0:e.map(function(e){var n=Array.isArray(e)?e:Object.entries(e).map(function(e){var t=(0,u.A)(e,2);return{name:t[0],value:t[1]}}),a=(0,K.PG)(n,"teamName","placement");return t=tn(tn({},t),a)}))),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:eB.__hash,children:eB}),(0,N.jsxs)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream",children:[(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__header"}),(0,N.jsxs)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__body",children:[(0,N.jsxs)(H.A,{xs:2,md:3,variant:"card",gap:10,children:[(0,N.jsxs)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card",children:[(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card-header",children:"Competitors"}),(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card-body",children:String(l.competitors.length)})]}),(0,N.jsxs)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card",children:[(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card-header",children:"Current Lap"}),(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card-body",children:"12 of 20"})]}),(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card",children:(0,N.jsx)("div",{className:"jsx-".concat(eB.__hash)+" admin-stream__card-header",children:"First Place"})})]}),(0,N.jsx)(te,tn({},{raceData:l,setRaceData:d,setFirst:a}))]})]})]})};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ts=function(){var e={customers:(0,N.jsx)(eC,{}),stream:(0,N.jsx)(ta,{}),data:(0,N.jsx)(eR,{}),products:(0,N.jsx)(T,{}),remote:(0,N.jsx)(eU,{}),sales:(0,N.jsx)(G,{}),operations:(0,N.jsx)("h1",{children:"Operations"}),finance:(0,N.jsx)("h1",{children:"Finance and Accounting"}),marketing:(0,N.jsx)(J,{}),humanResources:(0,N.jsx)("h1",{children:"Human Resources"}),customerService:(0,N.jsx)("h1",{children:"Customer Service"}),infoTechnology:(0,N.jsx)("h1",{children:"Information Technology"}),develop:(0,N.jsx)("h1",{children:"Research and Development"}),legal:(0,N.jsx)("h1",{children:"Legal"}),procurement:(0,N.jsx)("h1",{children:"Procurement"}),strategicPlanning:(0,N.jsx)("h1",{children:"Strategic Planning"})},t=(0,s.useState)(void 0),n=t[0],a=t[1],r=(0,I.QY)();return((0,v.useRouter)(),(0,s.useEffect)(function(){r<10&&n||(r&&r>=10?a(ti(ti({},e),{},{accounts:(0,N.jsx)(U,{})})):a(e))},[r]),void 0===n)?(0,N.jsx)(N.Fragment,{children:"not authorized"}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i(),{id:c.__hash,children:c}),(0,N.jsx)("div",{className:"jsx-".concat(c.__hash)+" admin",children:(0,N.jsx)(o.A,{title:(0,N.jsxs)("div",{className:"jsx-".concat(c.__hash)+" d-flex s-5 gray-70",children:["Admin ",r]}),subTitle:"admin: level ".concat(r),views:n,variant:"full"})})]})}},93516:(e,t,n)=>{n.d(t,{Q:()=>h});var a=n(42969),r=n(63857),i=n(45794),s=n(43081),c=n.n(s),o=n(14232),l=n(31361),d=n(33134),u=n(25179),m=n(43668);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showAll,n=void 0!==t&&t,a=m.A.merchant.mid,s=(0,l.cQ)("IProductService"),x=(0,d.A)(),h=x.sessionData,p=x.setSessionItem,v=(0,o.useState)(null),j=v[0],b=v[1],_=(0,o.useState)(!1),y=_[0],g=_[1],w=(0,o.useState)(!1),k=w[0],O=w[1],A=(0,o.useState)(0),N=A[0],S=A[1],P=(0,o.useState)(),C=P[0],D=P[1],E=(0,o.useState)(null),I=E[0],M=E[1],F=(0,u.pn)(),R=(0,i.A)(F,2),z=(R[0],R[1]),T=function(e){return e.filter(function(e){return null==e?void 0:e.active})},L=function(e){return e.filter(function(e){return e.metadata.mid==a})},q=(0,o.useCallback)(function(){var e=null==h?void 0:h.products,t=e&&Date.now()-e.created>6e4;if(e&&!t){var a=e.data;if(n||(a=L(T(a))),a)return b(a),S(a.length),O(e.has_more),D(e.live_mode),!0}return!1},[h,n]),Q=(0,o.useCallback)((0,r.A)(c().mark(function e(){var t,a,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y||j)){e.next=2;break}return e.abrupt("return");case 2:if(!q()){e.next=4;break}return e.abrupt("return");case 4:return z({active:!0}),g(!0),e.prev=6,e.next=9,s.getProducts({limit:3});case 9:null!=(t=e.sent)&&t.data&&(a=f(f({},t),{},{created:Date.now()}),r=t.data,n||(r=L(T(r))),b(r),p("products",a,{expiry:6e4}),O(t.has_more),D(t.live_mode),S(r.length)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0),M("Failed to fetch products.");case 17:return e.prev=17,z({active:!1}),g(!1),e.finish(17);case 21:case"end":return e.stop()}},e,null,[[6,13,17,21]])})),[y,j,q]);return(0,o.useEffect)(function(){Q(),console.log({sessionData:h})},[Q]),{products:j,loading:y,liveMode:C,hasMore:k,error:I,fetchProducts:Q,total:N}}}}]);