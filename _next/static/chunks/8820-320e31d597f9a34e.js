"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8820],{18820:(e,t,n)=>{n.d(t,{A:()=>$});var r=n(45794),o=n(54604),i=n.n(o),s=n(14232),a=n(11324),c=n.n(a),l=[".d-flex.jsx-1142697227,.map-tools.jsx-1142697227,.map-content.jsx-1142697227,.map-container.jsx-1142697227{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","@-webkit-keyframes fadein-jsx-1142697227{0%{opacity:0;-webkit-filter:blur(2px);filter:blur(2px);}100%{opacity:1;-webkit-filter:blur(0);filter:blur(0);}}","@keyframes fadein-jsx-1142697227{0%{opacity:0;-webkit-filter:blur(2px);filter:blur(2px);}100%{opacity:1;-webkit-filter:blur(0);filter:blur(0);}}",".map-container.jsx-1142697227{width:100%;height:100%;top:0;left:0;right:0;bottom:0;}","@media (max-width:1100px){.map-container.jsx-1142697227{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}",".map-fallback.jsx-1142697227{padding:4rem;color:#fff;text-align:center;background:#000;}",".map-fallback.jsx-1142697227 h2.jsx-1142697227{font-size:1.5rem;margin-bottom:1rem;}",".map-content.jsx-1142697227{width:100%;height:100%;position:relative;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;}",".map.jsx-1142697227{height:100%;width:100%;}",".map-tools.jsx-1142697227{gap:var(--s-3);cursor:pointer;color:var(--white);--ui-icon-color:var(--gray-30);--ui-icon-size:var(--s-1);position:absolute;bottom:var(--s-9);left:var(--s-9);right:var(--s-9);padding:var(--s-1);-webkit-animation-delay:1s;animation-delay:1s;-webkit-animation:fadein-jsx-1142697227 1s ease-in forwards;animation:fadein-jsx-1142697227 1s ease-in forwards;-webkit-transition:all 1s ease-in-out;transition:all 1s ease-in-out;height:-webkit-max-content;height:-moz-max-content;height:max-content;}",".embedded-map.jsx-1142697227{width:100%;height:100%;position:relative;background:#000;}",".embedded-map.jsx-1142697227 .map-content.jsx-1142697227{width:100%;height:100%;}",".embedded-map.jsx-1142697227 .map.jsx-1142697227{width:100%;height:100%;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227{position:absolute;top:10px;left:10px;background-color:#ffdb4d;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1),0 8px 10px rgba(0,0,0,0.1);padding:10px;color:#000;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--layer.jsx-1142697227{margin-bottom:10px;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--layer.jsx-1142697227 .fa-xmark.jsx-1142697227{color:#000;font-size:24px;cursor:pointer;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--layer.jsx-1142697227 .fa-xmark.jsx-1142697227:hover{color:#333;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--item.jsx-1142697227{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background-color:#ffdb4d;border-radius:5px;margin:5px 0;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,0.2);}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--item.jsx-1142697227:hover{background-color:#ffc107;}",".embedded-map.jsx-1142697227 .map-tools.jsx-1142697227 .map-tools--item.jsx-1142697227 .fa-icon.jsx-1142697227{color:#000;font-size:20px;margin-right:5px;}",".embedded-map.jsx-1142697227 .map-tools--search.jsx-1142697227{background-color:#ffdb4d;border:none;border-radius:5px;padding:10px;width:calc(100% - 20px);box-shadow:0 2px 4px rgba(0,0,0,0.2);}",".embedded-map.jsx-1142697227 .map-tools--search.jsx-1142697227:focus{outline:none;box-shadow:0 2px 4px rgba(0,0,0,0.4);}",".ui-icon.jsx-1142697227{color:#000;font-size:24px;cursor:pointer;}",".ui-icon.jsx-1142697227:hover{color:#333;}"];l.__hash="1142697227";var u=n(39286),d=n(25179),f=n(63857),m=n(42969),v=n(43081),p=n.n(v),h=n(31361),g=n(5126);let b=function(){var e=(0,g.hS)(),t=e.openModal,n=e.closeModal,r=e.isModalOpen,o=(0,s.useState)(),i=o[0],a=o[1],c=(0,s.useState)(!1),l=c[0],u=c[1],d=(0,s.useRef)(null),f=(0,s.useCallback)(function(e){a([Number(e.coords.longitude.toFixed(2)),Number(e.coords.latitude.toFixed(2))])},[]),m=(0,s.useCallback)(function(){console.error("Unable to retrieve your location"),u(!0)},[]),v=(0,s.useCallback)(function(){var e=d.current;e&&"granted"===e.state?(n(),navigator.geolocation.getCurrentPosition(f,m)):u(!0)},[n,m,f]),p=(0,s.useCallback)(function(){navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(function(e){d.current=e,e.addEventListener("change",v),"granted"===e.state?navigator.geolocation.getCurrentPosition(f,m):"prompt"!==e.state||r?u(!0):r||t({title:"Know Your Location",confirm:{title:"Enable Location",body:"To use this feature, please enable location access.",statements:[{label:"Allow",onClick:function(){var e;null==(e=d.current)||e.addEventListener("change",v),navigator.geolocation.getCurrentPosition(f,m)}},{label:"Deny",onClick:function(){n(),u(!0)}}]}})}).catch(function(e){console.error("Error querying permissions",e),u(!0)}):(console.error("Permission API not supported"),u(!0))},[v,m,f,r]);return(0,s.useEffect)(function(){return function(){var e=d.current;e&&e.removeEventListener("change",v)}},[v]),{lngLat:i,requestLocation:p,permissionDenied:l}};var x=n(89099),j=n(58283),w=n(37876);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,m.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.require,n=(0,h.cQ)("IMemberService"),r=(0,g.hS)(),o=r.isModalOpen,i=r.openModal;r.closeModal;var a=(0,s.useState)("sign-in"),c=a[0],l=a[1],u=(0,s.useState)(),d=u[0];u[1];var m=(0,x.useRouter)().query,v=b(),y=v.lngLat,O=v.requestLocation,L=v.permissionDenied,_=(0,s.useState)(),E=_[0],P=_[1],A=(0,s.useState)(function(){var e=n.getCurrentUser();return e?k(k({},e),{},{userAgent:{user_agent:"",user_agent_data:null,wan:""},lngLat:y}):void 0}),z=A[0],S=A[1];(0,s.useEffect)(function(){var e,t=(e=(0,f.A)(p().mark(function e(){var t,n,r,o,i;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.navigator.userAgent,r="userAgentData"in(n=navigator)?n.userAgentData:null,S(function(e){return k(k({},e),{},{userAgent:{user_agent:t,user_agent_data:r}})}),o=function(){var e=(0,f.A)(p().mark(function e(){var t,n,r,i,s,a,c=arguments;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,!(n=sessionStorage.getItem("wan_ip"))){e.next=5;break}return e.abrupt("return",n);case 5:return r=new AbortController,i=setTimeout(function(){return r.abort()},3e3),e.next=9,fetch("https://ipapi.co/json/",{signal:r.signal});case 9:if(s=e.sent,clearTimeout(i),s.ok){e.next=13;break}throw Error("IPAPI fetch failed");case 13:return e.next=15,s.json();case 15:return a=e.sent,sessionStorage.setItem("wan_ip",a.ip),e.abrupt("return",a.ip);case 20:if(e.prev=20,e.t0=e.catch(1),t){e.next=24;break}return e.abrupt("return",o(!0));case 24:return console.warn("[useProfile] WAN IP fetch failed after retry:",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||e.t0),e.abrupt("return",null);case 26:case"end":return e.stop()}},e,null,[[1,20]])}));return function(){return e.apply(this,arguments)}}(),e.next=7,o();case 7:(i=e.sent)&&S(function(e){return k(k({},e),{},{userAgent:k(k({},e.userAgent),{},{wan:i})})});case 9:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return t(),window.addEventListener("load",t),function(){return window.removeEventListener("load",t)}},[]);var D=function(e){o||(l(e),i({title:"sign in ",children:(0,w.jsx)(j.default,{view:e})}))};(0,s.useEffect)(function(){m&&m.verify&&"verify"!==c&&l("verify"),void 0===d||o||"sign-in"===c||l("sign-in")},[m,o,d,c]),(0,s.useEffect)(function(){y&&S(function(e){return k(k({},e),{},{lngLat:y})})},[y]),(0,s.useEffect)(function(){z&&!z.userAgent.user_agent&&S(function(e){return k(k({},e),{},{userAgent:{user_agent:window.navigator.userAgent,user_agent_data:navigator.userAgentData||null}})})},[z]);var C=function(){!t||"location"===t&&null!=z&&z.id&&"user"===E&&o||(E&&"location"===t&&"done"===E||P("user"),D("sign-in"))},N=function(){"user"!==E||"sign-in"!==c||o?(z||"location"===t)&&P("location"):P("location")};return(0,s.useEffect)(function(){t&&(null!=z&&z.id||void 0!==E||C(),"location"!==E&&N(),"location"!==E||null!=z&&z.lngLat||o||L||O(),L&&(P("done"),S(function(e){return k(k({},e),{},{lngLat:[0,0]})})))},[o,L,E]),z};var L=n(70236),_=function(e,t){var n=t.lngLat,r=void 0===n?[0,0]:n,o=t.zoom,i=t.offset,s=void 0===i?{x:0,y:0}:i,a=t.direction,c=t.duration;if(e){var l=(0,L.A)(r);if(a){var u=e.getCanvas();u.width,u.height;var d=0,f=0;switch(a){case"up":f=-s.y;break;case"down":f=s.y;break;case"left":d=-s.x;break;case"right":d=s.x}var m=e.project(r);m.x+=d,m.y+=f,l=e.unproject(m).toArray()}e.flyTo({center:l,zoom:void 0===o?9:o,essential:!0,duration:void 0===c?1e3:c})}},E=n(55108),P=[".d-flex.jsx-514857226,.vessel-details-sliver.jsx-514857226{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".vessel-details.jsx-514857226{position:fixed;background-color:var(--gray-100);z-index:1001;width:100%;overflow-y:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-transition:height 0.2s ease;transition:height 0.2s ease;height:100%;border-radius:var(--border-radius);bottom:0;max-height:calc(100vh - var(--s-nav-hite));-webkit-transition:height 0.2s ease;transition:height 0.2s ease;}",".vessel-details-sliver.jsx-514857226{position:absolute;top:0;z-index:111;height:var(--s-element);width:var(--s-9-width);margin:var(--s-9);--ui-icon-height:var(--s-element);--ui-icon-width:var(--s-1);color:var(--gray-70-o);text-transform:uppercase;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;left:auto;right:auto;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-radius:var(--border-radius);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".vessel-details-sliver.jsx-514857226:hover{color:var(--gray-10);background:var(--gray-70-o);}",".vessel-details-sliver.jsx-514857226:focus-visible{color:var(--gray-60);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:var(--gray-80);cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}",".vessel-details-sliver.jsx-514857226:active{background:var(--gray-70);cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}",".vessel-details-content.jsx-514857226{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto;width:100%;height:100%;position:relative;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}",".vessel-details-content--header.jsx-514857226{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:none;width:var(--s-9-width);padding:var(--s-9);padding-top:50px;}",".vessel-details-content--header.jsx-514857226:active{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}",".vessel-details-content--body.jsx-514857226{height:100%;width:100%;position:relative;overflow-x:visible;}"];P.__hash="514857226";var A=n(65976);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let S=function(e){var t,n,o=e.vessel,a=(e.setVessel,e.onResize),c=(0,u.A)().height,l=(0,s.useRef)(null),d=(0,s.useState)(0),f=d[0],v=d[1],p=(0,s.useRef)(null),h=(0,s.useRef)(f),g=(0,s.useRef)(null),b=.33*c,x=(0,s.useCallback)(function(e){if(null!==p.current){var t=p.current-e,n=Math.min(Math.max(100,h.current+t),c);console.log(t),null==a||a(t),v(n)}},[c]),j=function(e){g.current&&cancelAnimationFrame(g.current),g.current=requestAnimationFrame(function(){return x(e.clientY)})},y=function(e){g.current&&cancelAnimationFrame(g.current),g.current=requestAnimationFrame(function(){return x(e.touches[0].clientY)})},k=function e(t){document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",e),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",e),p.current=null},O=function(e){p.current=e,h.current=f,document.addEventListener("mousemove",j),document.addEventListener("mouseup",function(){return k(e)}),document.addEventListener("touchmove",y),document.addEventListener("touchend",function(){return k(e)})};return((0,s.useEffect)(function(){c&&c!=b&&v(b)},[c]),(0,s.useEffect)(function(){return function(){g.current&&cancelAnimationFrame(g.current)}},[f]),o&&f)?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i(),{id:P.__hash,children:P}),(0,w.jsxs)("div",{ref:l,style:{height:"".concat(f,"px")},className:"jsx-".concat(P.__hash)+" vessel-details",children:[(0,w.jsx)("div",{onMouseDown:function(e){return O(e.clientY)},onTouchStart:function(e){return O(e.touches[0].clientY)},className:"jsx-".concat(P.__hash)+" vessel-details-sliver",children:"Slide to resize"}),(null==o?void 0:o.name)&&(0,w.jsxs)("div",{className:"jsx-".concat(P.__hash)+" vessel-details-content",children:[(0,w.jsx)("div",{className:"jsx-".concat(P.__hash)+" vessel-details-content--header",children:(0,w.jsx)(A.A,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,m.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},(t=o.name.split(" ",2),{title:(n=(0,r.A)(t,2))[0],subTitle:n[1]})))}),o.description]})]})]}):null};var D=[".map-search.jsx-1040465573{min-width:300px;}","@media (max-width:1100px){.map-search.jsx-1040465573{min-width:70vw;}}"];D.__hash="1040465573";var C=n(17812);let N=function(e){var t,n=e.handleSearch,r=e.searched,o=(0,s.useState)("where to?"),a=o[0],c=o[1],l=["New York","Los Angeles","Chicago","Houston","Phoenix"];return(0,s.useEffect)(function(){var e=function(){var e=0;return t=setInterval(function(){c(l[e]),e=(e+1)%l.length},5e3),function(){clearInterval(t)}};setTimeout(function(){e()},5e3)},[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i(),{id:D.__hash,children:D}),(0,w.jsx)("div",{className:"jsx-".concat(D.__hash)+" map-search",children:(0,w.jsx)(C.A,{name:"address",size:"xl",variant:"transparent round",placeholder:a,value:r,onChange:n})})]})},M=function(e){e.lngLat;var t=e.setLngLat,n=e.map,r=(0,s.useState)(),o=r[0],i=r[1],a=function(e){var r=e.target.value,o=[null==r?void 0:r.lng,null==r?void 0:r.lat];o&&(i(r),t(o),_(n,{lngLat:o,zoom:14}))};return(0,s.useEffect)(function(){},[a]),{searched:o,handleSearch:a}};var F=n(78944);let T=function(e){var t,n=e.vessel,r=e.hideHover,o=void 0!==r&&r,i=e.onClick,s=e.onMouseEnter,a=e.onMouseLeave;if(!n)return null;var c="vsl ".concat(n.className?n.className+"-mrkr":""),l="user"===n.className,u=function(e){var t=document.getElementById("vsl-".concat(n.id));t&&("click"===e?null==i||i(n):"enter"===e?(o||t.classList.add("vsl-mrkr--hover"),null==s||s(n)):"leave"===e&&setTimeout(function(){t.className="vsl-mrkr",null==a||a(n)},2e3))};return(0,w.jsxs)("div",{onMouseEnter:function(){return u("enter")},onClick:function(){return u("click")},className:c,onMouseLeave:function(){return u("leave")},children:[(0,w.jsx)("div",{className:"vsl-icon",children:(0,w.jsx)(E.o,{glow:l,icon:l?"fal-circle-user":"fa-location-dot"})}),(0,w.jsx)("div",{id:"vsl-".concat(n.id),className:"vsl-mrkr",children:(0,w.jsx)("div",{className:"vsl-mrkr--content",children:null!=(t=n.hover)?t:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"vsl-mrkr--content-header",children:(0,w.jsx)("div",{className:"dev",children:(null==n?void 0:n.hover)||n.name})})})})})]})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,m.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let I=function(e,t,n,r){n&&n.forEach(function(n){var o=document.createElement("div");(0,F.createRoot)(o).render(T(R(R({vessel:n},t),{},{hideHover:r}))),n.lngLat&&new(c()).Marker(o).setLngLat(n.lngLat).addTo(e)})};var Z=n(4917),Y=n.n(Z),H=!1,V=null,G=1,J="LandSvg";let W=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.rpm,i=void 0===o?500:o,s=r.zoom,a=void 0===s?3:s,c=r.maxZoom,l=void 0===c?5:c;function u(){if(!H){var t=e.getZoom(),n=e.getCenter();if(t<l){var r=360/i*G;t>a&&(r*=(l-t)/(l-a)),n.lng-=r,e.easeTo({center:n,duration:1500,easing:function(e){return e}})}}}e.on("moveend",u),u(),t=function(){H=!0,V=Date.now()},n=Y()(function(){H=!1,G=1+(Date.now()-(V||Date.now()))/5e3,u()},3e3),e.on("mousedown",t),e.on("mouseup",n),e.on("touchstart",t),e.on("touchend",n),e.on("mousemove",n),e.on("touchmove",n),e.getLayer(J)?(e.on("mouseenter",J,function(){return e.fire("mouseenter")}),e.on("mouseleave",J,function(){return e.fire("mouseleave")})):console.warn('Layer "'.concat(J,'" does not exist'))};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,m.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Q=function(e){var t=e.map,n=e.profile,r=e.vessels,o=e.userVesselConfig,i=e.vesselActions,s=e.mapOptions,a=e.stopLoader,c=e.setLngLat,l=e.setZoom,u=e.hideHover,d=(null==n?void 0:n.lngLat)&&n.lngLat.every(function(e){return 0!==e});t.on("style.load",function(){(null==s?void 0:s.pitch)&&t.setPitch(null==s?void 0:s.pitch),I(t,i,(null!=n&&n.lngLat&&(o.lngLat=null==n?void 0:n.lngLat),r)?d?[].concat((0,L.A)(r),[o]).map(function(e,t){return K(K({},e),{},{id:t+1})}):(0,L.A)(r).map(function(e,t){return K(K({},e),{},{id:t+1})}):[o],u),(null==s?void 0:s.rpm)&&W(t,{zoom:(null==s?void 0:s.zoom)||t.getZoom(),rpm:null==s?void 0:s.rpm,maxZoom:(null==s?void 0:s.zoom)+5}),a()}),t.on("move",function(){c((null==s?void 0:s.center)||t.getCenter().toArray()),l((null==s?void 0:s.zoom)||t.getZoom())})},B=function(e,t,n,r,o,i){if(e.current){var s=t.current;!1===n?(console.log("[ TODO  ]:hideVessel",null==t?void 0:t.current),o(!1)):!1!==n&&(_(s,{lngLat:i.lngLat,zoom:15,offset:{y:Math.abs(.9*r),x:0},direction:r<1?"up":"down"}),t.current&&t.current.resize())}};c().accessToken="pk.eyJ1IjoibGFuZG9sYWJydW0iLCJhIjoiY2xnMDZ1aGVsMHJ5MzNsdGF3aHZhM3dtbyJ9.UihOXtkEeRk5tQDgDK8cLg";var X=function(){try{var e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}};let $=function(e){var t,n,o,a,f=e.options,m=e.vessels,v=e.onVesselClick,p=e.require,h=e.hideHover,g=e.variant,b=void 0===g?"fullscreen":g,j=(0,s.useRef)(null),y=(0,s.useRef)(null),k=(0,d.pn)(),L=(0,r.A)(k,2),P=L[0],A=L[1],z=O({require:p}),D=(0,x.useRouter)(),C=(0,s.useState)(null),F=C[0],T=C[1],q=(0,s.useState)("clw76pwt4003o01q120rh1mkk"),R=q[0],I=q[1],Z=(0,s.useState)(),Y=Z[0],H=Z[1],V=(0,u.A)(),G=V.width,J=V.height,W=G<900?.6:G>1400?2:(G-900)/500*1.4+.6,U=(0,s.useState)(null!=(t=null==f?void 0:f.zoom)?t:W),K=U[0],$=U[1],ee=(0,s.useState)(null!=(n=null==f?void 0:f.center)?n:[0,10]),et=ee[0],en=ee[1];(0,s.useEffect)(function(){null!=f&&f.center&&y.current&&(null==f?void 0:f.zoom)!==void 0&&en(f.center)},[null==f?void 0:f.center,null==f?void 0:f.zoom]);var er={container:j.current,center:et,zoom:K,style:"mapbox://styles/landolabrum/".concat(R),projection:{name:"globe"},antialias:!0,rpm:(null==f?void 0:f.rpm)||0,pitch:(null==f?void 0:f.pitch)||0},eo=M({lngLat:et,setLngLat:en,map:y.current}),ei=eo.searched,es=eo.handleSearch,ea={name:null!=(o=null==z?void 0:z.name)?o:"You are here",className:"user",hover:(0,w.jsx)("h1",{children:null==z?void 0:z.name}),lngLat:null!=(a=null==z?void 0:z.lngLat)?a:[0,0]},ec={onClick:function(e){var t=y.current;t&&e&&(T(e),null==v||v(e),_(t,{lngLat:e.lngLat,zoom:15}))},onMouseEnter:function(){},onMouseLeave:function(){}},el=function(){null!=f&&f.loadingDelay?setTimeout(function(){return A({active:!1})},f.loadingDelay):A({active:!1})};(0,s.useEffect)(function(){var e=Y&&Y===D.asPath,t=j.current&&e;if(Y||H(D.asPath),y.current||!e||P.active?!e&&P.active&&el():A({active:!0,body:" ",iconSize:G<=1100?"70vw":"350px"}),t){if(!X()){console.warn("\uD83E\uDDE8 WebGL is not supported â€” skipping map initialization."),el();return}try{var n=new(c()).Map(er);return y.current=n,Q({map:n,profile:z,vessels:m,userVesselConfig:ea,vesselActions:ec,mapOptions:er,stopLoader:el,setLngLat:en,setZoom:$,hideHover:h}),function(){n.remove(),y.current=null}}catch(e){console.error("\uD83E\uDDE8 Failed to initialize Mapbox GL:",e),el()}}},[j.current,p,z,D.asPath,R]),(0,s.useEffect)(function(){if(j.current){var e;null==(e=y.current)||e.resize()}},[F]);var eu=(0,s.useCallback)(function(e){B(j,y,null!==F,e,function(e){return T(!1===e?null:e)},F)},[G,J,F,K]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i(),{id:l.__hash,children:l}),(0,w.jsx)("div",{className:"jsx-".concat(l.__hash)+" "+(("fullscreen"===b?"map-container":"embedded")||""),children:(0,w.jsxs)("div",{style:"fullscreen"!==b?{height:"100%",width:"100%",position:"relative"}:void 0,className:"jsx-".concat(l.__hash)+" map-content",children:[(0,w.jsx)("div",{ref:j,onDoubleClick:function(){return T(null)},style:"fullscreen"!==b?{height:"100%",width:"100%"}:void 0,className:"jsx-".concat(l.__hash)+" map"}),F&&(0,w.jsx)(S,{vessel:F,setVessel:T,onResize:eu}),!P.active&&!(null!=f&&f.hideTools)&&(0,w.jsxs)("div",{className:"jsx-".concat(l.__hash)+" map-tools",children:[(0,w.jsx)("div",{className:"jsx-".concat(l.__hash)+" map-tools--layer",children:(0,w.jsx)(E.o,{icon:"fa-xmark",onClick:function(){return I("clwvqyuxe01bl01q11d6m8nh7")}})}),(0,w.jsx)(N,{searched:ei,handleSearch:es}),(0,w.jsx)(E.o,{onClick:function(){return _(y.current,{zoom:K>6?10:6})},icon:K>6?"fa-globe":"fa-map"})]})]})})]})}}}]);