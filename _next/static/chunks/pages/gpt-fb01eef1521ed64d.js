(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3891],{44305:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/gpt",function(){return s(53108)}])},53108:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(70236),n=s(63857),r=s(54604),i=s.n(r),c=s(43081),o=s.n(c),l=s(14232),x=[".gpt-page.jsx-3401223241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:2rem;width:100%;height:100vh;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".chat-container.jsx-3401223241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;max-width:1400px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;gap:1rem;}",".chat-container.jsx-3401223241 .left-panel.jsx-3401223241{width:30%;background-color:#2c3e50;border-radius:12px;padding:1.5rem;box-shadow:0 4px 20px rgba(0,0,0,0.4);color:#ecf0f1;}",".chat-container.jsx-3401223241 .left-panel.jsx-3401223241 h3.jsx-3401223241{margin-bottom:1rem;font-size:1.25rem;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241{width:65%;background-color:#1e1e1e;border-radius:12px;padding:1.5rem;box-shadow:0 4px 20px rgba(0,0,0,0.4);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:1rem;color:#ecf0f1;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1rem;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241 input.jsx-3401223241{-webkit-flex:1;-ms-flex:1;flex:1;padding:0.75rem;border-radius:6px;border:none;background:#34495e;color:#ecf0f1;font-size:1rem;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241 input.jsx-3401223241:focus{outline:2px solid #3498db;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241 button.jsx-3401223241{background:#3498db;border:none;padding:0.75rem 1rem;border-radius:6px;color:#fff;font-weight:bold;cursor:pointer;-webkit-transition:background 0.2s ease;transition:background 0.2s ease;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241 button.jsx-3401223241:hover{background:#2980b9;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .input-area.jsx-3401223241 button.jsx-3401223241:disabled{background:#95a5a6;cursor:not-allowed;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .new-chat-btn.jsx-3401223241{background:#e67e22;border:none;padding:0.75rem 1rem;border-radius:6px;color:#fff;font-weight:bold;cursor:pointer;-webkit-transition:background 0.2s ease;transition:background 0.2s ease;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .new-chat-btn.jsx-3401223241:hover{background:#d35400;}",".chat-container.jsx-3401223241 .right-panel.jsx-3401223241 .new-chat-btn.jsx-3401223241:disabled{background:#95a5a6;cursor:not-allowed;}"];x.__hash="3401223241";var d=s(31361),h=s(99920),u=[".gpt-history.jsx-2074124090{max-width:700px;margin:0 auto 2rem auto;padding:1rem;background-color:#1e1e1e;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.3);color:#ecf0f1;}",".gpt-history.jsx-2074124090 h3.jsx-2074124090{font-size:1.25rem;margin-bottom:1rem;text-align:center;color:#bdc3c7;}",".gpt-history.jsx-2074124090 ul.jsx-2074124090{list-style:none;padding:0;margin:0;}",".gpt-history.jsx-2074124090 ul.jsx-2074124090 .msg.jsx-2074124090{padding:0.75rem 1rem;border-radius:8px;margin-bottom:0.75rem;line-height:1.5;word-wrap:break-word;}",".gpt-history.jsx-2074124090 ul.jsx-2074124090 .msg-user.jsx-2074124090{background-color:#2c3e50;text-align:right;color:#ecf0f1;}",".gpt-history.jsx-2074124090 ul.jsx-2074124090 .msg-assistant.jsx-2074124090{background-color:#34495e;text-align:left;color:#ecf0f1;}",".gpt-history.jsx-2074124090 ul.jsx-2074124090 .msg-system.jsx-2074124090{background-color:#7f8c8d;text-align:center;font-style:italic;color:#fff;}","@media (max-width:600px){.gpt-history.jsx-2074124090{padding:1rem;}.gpt-history.jsx-2074124090 h3.jsx-2074124090{font-size:1rem;}.gpt-history.jsx-2074124090 .msg.jsx-2074124090{font-size:0.9rem;}}"];u.__hash="2074124090";var p=s(37876);let g=function(e){var t=e.chats,s=(0,h.Jd)(),a=(0,l.useState)([]),r=(a[0],a[1]),c=(0,l.useState)(!0),x=c[0],g=c[1];return(0,l.useEffect)(function(){var e;(e=(0,n.A)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(null==s?void 0:s.id)||"guest",e.next=4,(0,d.cQ)("IGPTService").getChatHistory(t);case 4:r(e.sent.messages),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("[GPT] Failed to fetch history",e.t0);case 11:return e.prev=11,g(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])})),function(){return e.apply(this,arguments)})()},[s]),(0,p.jsxs)("div",{className:"jsx-".concat(u.__hash)+" gpt-history",children:[(0,p.jsx)(i(),{id:u.__hash,children:u}),(0,p.jsx)("h3",{className:"jsx-".concat(u.__hash),children:"Previous Chats"}),x?(0,p.jsx)("p",{className:"jsx-".concat(u.__hash),children:"Loading chats..."}):(0,p.jsx)("ul",{className:"jsx-".concat(u.__hash),children:(null==t?void 0:t.length)&&t.map(function(e,t){return(0,p.jsxs)("li",{className:"jsx-".concat(u.__hash)+" chat-item",children:["Chat ",e]},t)})})]})},f=function(e){var t=e.messages;return(0,p.jsxs)("div",{className:"current-chat",children:[(0,p.jsx)("h3",{children:"Current Chat"}),(0,p.jsx)("div",{className:"messages",children:t.map(function(e,t){return(0,p.jsxs)("div",{className:"msg msg-".concat(e.role),children:[(0,p.jsxs)("strong",{children:[e.name||e.role,":"]})," ",e.content]},t)})})]})},j=function(){var e,t,s=(0,d.cQ)("IGPTService"),r=(0,l.useState)(""),c=r[0],u=r[1],j=(0,l.useState)(""),m=j[0],b=j[1],w=(0,l.useState)([]),k=w[0],v=w[1],_=(0,l.useState)(!1),y=_[0],N=_[1],C=(0,l.useState)([]),S=C[0],P=C[1],A=(0,h.Jd)();(0,l.useEffect)(function(){var e,t;(e=(0,n.A)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.getNewChat((null==A?void 0:A.id)||"guest");case 3:u((t=e.sent).uid),v(t.messages||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("[GPT] Failed to initialize chat",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return e.apply(this,arguments)})(),(t=(0,n.A)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.listChats((null==A?void 0:A.id)||"guest");case 3:P(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("[GPT] Failed to fetch chats",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)})()},[A]);var T=(e=(0,n.A)(o().mark(function e(){var t,n,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.trim()){e.next=2;break}return e.abrupt("return");case 2:return t=(null==A?void 0:A.name)||"Anonymous",v(n=[].concat((0,a.A)(k),[{role:"user",content:m,name:t}])),N(!0),e.prev=6,e.next=9,s.sendChat({uid:c,messages:n});case 9:(r=e.sent).reply&&v([].concat((0,a.A)(n),[{role:"assistant",content:r.reply}])),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("[GPT] Failed to send chat",e.t0);case 16:b(""),N(!1);case 18:case"end":return e.stop()}},e,null,[[6,13]])})),function(){return e.apply(this,arguments)}),E=(t=(0,n.A)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v([]),e.prev=1,e.next=4,s.getNewChat((null==A?void 0:A.id)||"guest");case 4:u((t=e.sent).uid),v(t.messages||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("[GPT] Failed to start new chat",e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])})),function(){return t.apply(this,arguments)});return(0,p.jsxs)("div",{className:"jsx-".concat(x.__hash)+" gpt-page",children:[(0,p.jsx)(i(),{id:x.__hash,children:x}),(0,p.jsxs)("div",{className:"jsx-".concat(x.__hash)+" chat-container",children:[(0,p.jsx)("div",{className:"jsx-".concat(x.__hash)+" left-panel",children:(0,p.jsx)(g,{chats:S})}),(0,p.jsxs)("div",{className:"jsx-".concat(x.__hash)+" right-panel",children:[(0,p.jsx)(f,{messages:k}),(0,p.jsxs)("div",{className:"jsx-".concat(x.__hash)+" input-area",children:[(0,p.jsx)("input",{type:"text",value:m,onChange:function(e){return b(e.target.value)},placeholder:"Ask a question...",className:"jsx-".concat(x.__hash)}),(0,p.jsx)("button",{onClick:T,disabled:y,className:"jsx-".concat(x.__hash),children:y?"Sending...":"Send"})]}),(0,p.jsx)("button",{onClick:E,disabled:y,className:"jsx-".concat(x.__hash)+" new-chat-btn",children:"Start New Chat"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(44305)),_N_E=e.O()}]);